{"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nrequire('@babel/register');\nconst chalk = require('chalk');\nconst cluster = require('cluster');\nconst {\n  cpus\n} = require('os');\n// import dotenv from \"dotenv\";\nconst dotenv = require('dotenv');\nconst app = require('./app');\nconst PORT = process.env.PORT || 3000;\n\n// Handle uncaught exceptions\nprocess.on('uncaughtException', err => {\n  console.log(chalk.red('Uncaught Exception: Shutting down...'));\n  console.log('Uncaught Exception: ', err);\n  console.log('Uncaught Exception Stack ', err.stack);\n  process.exit(1);\n});\nconst workers = [];\nconst setUpWorkerProcesses = () => {\n  // Use chalk to colorize the console\n  console.log(chalk.blue(`Master cluster setting up ${cpus().length} workers`));\n\n  // Iterate on CPUs length and create a worker for each CPU\n  for (let i = 0; i < cpus().length; i += 1) {\n    workers.push(cluster.fork());\n\n    // To receive messages from worker process\n    workers[i].on('message', message => {\n      console.log(message);\n    });\n  }\n\n  // process is clustered on a core and process id is assigned\n  cluster.on('online', worker => {\n    console.log(`Worker ${worker.process.pid} is listening`);\n  });\n\n  // If any of the worker process dies, then start a new one by simply forking another one\n  cluster.on('exit', (worker, code, signal) => {\n    console.log(`Worker ${worker.process.pid} died with code: ${code}, and signal: ${signal}`);\n    console.log('Starting a new worker');\n    cluster.fork();\n    workers.push(cluster.fork());\n    const newWorker = workers[workers.length - 1];\n    newWorker.on('message', message => {\n      // use chalk\n      console.log(chalk.bgRed(`Message from worker ${newWorker.process.pid}: ${message}`));\n    });\n  });\n};\nconst setUpExpress = () => {\n  dotenv.config({\n    path: './.env'\n  });\n  const server = app.listen(PORT, () => {\n    console.log(chalk.greenBright(`Server is running on port ${PORT}`));\n  });\n  app.on('error', appErr => {\n    console.error(chalk.bgRed(`app error: ${appErr.stack}`));\n    console.error(chalk.bgRed(`on url: ${appErr.route}`));\n    console.error(chalk.bgRed(`with headers: ${appErr.trace}`));\n  });\n\n  // Handle unhandled rejections\n  process.on('unhandledRejection', err => {\n    console.log(chalk.bgRed('UNHANDLED REJECTION! ðŸ’¥ Shutting down...'));\n    console.log('unhandledRejection Err::', err);\n    console.log('unhandledRejection Stack::', JSON.stringify(err.stack));\n    server.close(() => {\n      process.exit(1);\n    });\n  });\n\n  // Handle termination signals\n  process.on('SIGTERM', () => {\n    console.log(chalk.bgRed('ðŸ‘‹ SIGTERM RECEIVED. Shutting down gracefully'));\n    server.close(() => {\n      console.log(chalk.bgRed('ðŸ’¥ Process terminated'));\n      process.exit(0);\n    });\n  });\n\n  // SIGABRT\n  process.on('SIGABRT', () => {\n    console.log(chalk.bgRed('ðŸ‘‹ SIGABRT RECEIVED. Shutting down gracefully'));\n    server.close(() => {\n      console.log(chalk.bgRed('ðŸ’¥ Process terminated'));\n      process.exit(0);\n    });\n  });\n};\nconst setupServer = isClusterRequired => {\n  // if it is a master process then call setting up worker process\n  if (isClusterRequired && cluster.isMaster) {\n    setUpWorkerProcesses();\n  } else {\n    //   Setup server config and share port address for incoming requests\n    setUpExpress();\n  }\n};\nif (process.env.NODE_ENV === 'production') {\n  setupServer(true);\n} else {\n  setupServer(false);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY2hhbGsiLCJjbHVzdGVyIiwiY3B1cyIsImRvdGVudiIsImFwcCIsIlBPUlQiLCJwcm9jZXNzIiwiZW52Iiwib24iLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicmVkIiwic3RhY2siLCJleGl0Iiwid29ya2VycyIsInNldFVwV29ya2VyUHJvY2Vzc2VzIiwiYmx1ZSIsImxlbmd0aCIsImkiLCJwdXNoIiwiZm9yayIsIm1lc3NhZ2UiLCJ3b3JrZXIiLCJwaWQiLCJjb2RlIiwic2lnbmFsIiwibmV3V29ya2VyIiwiYmdSZWQiLCJzZXRVcEV4cHJlc3MiLCJjb25maWciLCJwYXRoIiwic2VydmVyIiwibGlzdGVuIiwiZ3JlZW5CcmlnaHQiLCJhcHBFcnIiLCJlcnJvciIsInJvdXRlIiwidHJhY2UiLCJKU09OIiwic3RyaW5naWZ5IiwiY2xvc2UiLCJzZXR1cFNlcnZlciIsImlzQ2x1c3RlclJlcXVpcmVkIiwiaXNNYXN0ZXIiLCJOT0RFX0VOViJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdAYmFiZWwvcmVnaXN0ZXInKTtcbmNvbnN0IGNoYWxrID0gcmVxdWlyZSgnY2hhbGsnKTtcblxuY29uc3QgY2x1c3RlciA9IHJlcXVpcmUoJ2NsdXN0ZXInKTtcblxuY29uc3QgeyBjcHVzIH0gPSByZXF1aXJlKCdvcycpO1xuLy8gaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5jb25zdCBkb3RlbnYgPSByZXF1aXJlKCdkb3RlbnYnKTtcbmNvbnN0IGFwcCA9IHJlcXVpcmUoJy4vYXBwJyk7XG5cbmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XG5cbi8vIEhhbmRsZSB1bmNhdWdodCBleGNlcHRpb25zXG5wcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coY2hhbGsucmVkKCdVbmNhdWdodCBFeGNlcHRpb246IFNodXR0aW5nIGRvd24uLi4nKSk7XG4gIGNvbnNvbGUubG9nKCdVbmNhdWdodCBFeGNlcHRpb246ICcsIGVycik7XG4gIGNvbnNvbGUubG9nKCdVbmNhdWdodCBFeGNlcHRpb24gU3RhY2sgJywgZXJyLnN0YWNrKTtcbiAgcHJvY2Vzcy5leGl0KDEpO1xufSk7XG5cbmNvbnN0IHdvcmtlcnMgPSBbXTtcblxuY29uc3Qgc2V0VXBXb3JrZXJQcm9jZXNzZXMgPSAoKSA9PiB7XG4gIC8vIFVzZSBjaGFsayB0byBjb2xvcml6ZSB0aGUgY29uc29sZVxuICBjb25zb2xlLmxvZyhjaGFsay5ibHVlKGBNYXN0ZXIgY2x1c3RlciBzZXR0aW5nIHVwICR7Y3B1cygpLmxlbmd0aH0gd29ya2Vyc2ApKTtcblxuICAvLyBJdGVyYXRlIG9uIENQVXMgbGVuZ3RoIGFuZCBjcmVhdGUgYSB3b3JrZXIgZm9yIGVhY2ggQ1BVXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY3B1cygpLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgd29ya2Vycy5wdXNoKGNsdXN0ZXIuZm9yaygpKTtcblxuICAgIC8vIFRvIHJlY2VpdmUgbWVzc2FnZXMgZnJvbSB3b3JrZXIgcHJvY2Vzc1xuICAgIHdvcmtlcnNbaV0ub24oJ21lc3NhZ2UnLCAobWVzc2FnZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBwcm9jZXNzIGlzIGNsdXN0ZXJlZCBvbiBhIGNvcmUgYW5kIHByb2Nlc3MgaWQgaXMgYXNzaWduZWRcbiAgY2x1c3Rlci5vbignb25saW5lJywgKHdvcmtlcikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBXb3JrZXIgJHt3b3JrZXIucHJvY2Vzcy5waWR9IGlzIGxpc3RlbmluZ2ApO1xuICB9KTtcblxuICAvLyBJZiBhbnkgb2YgdGhlIHdvcmtlciBwcm9jZXNzIGRpZXMsIHRoZW4gc3RhcnQgYSBuZXcgb25lIGJ5IHNpbXBseSBmb3JraW5nIGFub3RoZXIgb25lXG4gIGNsdXN0ZXIub24oJ2V4aXQnLCAod29ya2VyLCBjb2RlLCBzaWduYWwpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgV29ya2VyICR7d29ya2VyLnByb2Nlc3MucGlkfSBkaWVkIHdpdGggY29kZTogJHtjb2RlfSwgYW5kIHNpZ25hbDogJHtzaWduYWx9YCk7XG4gICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIGEgbmV3IHdvcmtlcicpO1xuICAgIGNsdXN0ZXIuZm9yaygpO1xuICAgIHdvcmtlcnMucHVzaChjbHVzdGVyLmZvcmsoKSk7XG4gICAgY29uc3QgbmV3V29ya2VyID0gd29ya2Vyc1t3b3JrZXJzLmxlbmd0aCAtIDFdO1xuICAgIG5ld1dvcmtlci5vbignbWVzc2FnZScsIChtZXNzYWdlKSA9PiB7XG4gICAgICAvLyB1c2UgY2hhbGtcbiAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmJnUmVkKGBNZXNzYWdlIGZyb20gd29ya2VyICR7bmV3V29ya2VyLnByb2Nlc3MucGlkfTogJHttZXNzYWdlfWApKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBzZXRVcEV4cHJlc3MgPSAoKSA9PiB7XG4gIGRvdGVudi5jb25maWcoe1xuICAgIHBhdGg6ICcuLy5lbnYnLFxuICB9KTtcblxuICBjb25zdCBzZXJ2ZXIgPSBhcHAubGlzdGVuKFBPUlQsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhjaGFsay5ncmVlbkJyaWdodChgU2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydCAke1BPUlR9YCkpO1xuICB9KTtcblxuICBhcHAub24oJ2Vycm9yJywgKFxuICAgIGFwcEVycixcbiAgKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihjaGFsay5iZ1JlZChgYXBwIGVycm9yOiAke2FwcEVyci5zdGFja31gKSk7XG4gICAgY29uc29sZS5lcnJvcihjaGFsay5iZ1JlZChgb24gdXJsOiAke2FwcEVyci5yb3V0ZX1gKSk7XG4gICAgY29uc29sZS5lcnJvcihjaGFsay5iZ1JlZChgd2l0aCBoZWFkZXJzOiAke2FwcEVyci50cmFjZX1gKSk7XG4gIH0pO1xuXG4gIC8vIEhhbmRsZSB1bmhhbmRsZWQgcmVqZWN0aW9uc1xuICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coY2hhbGsuYmdSZWQoJ1VOSEFORExFRCBSRUpFQ1RJT04hIPCfkqUgU2h1dHRpbmcgZG93bi4uLicpKTtcbiAgICBjb25zb2xlLmxvZygndW5oYW5kbGVkUmVqZWN0aW9uIEVycjo6JywgZXJyKTtcbiAgICBjb25zb2xlLmxvZygndW5oYW5kbGVkUmVqZWN0aW9uIFN0YWNrOjonLCBKU09OLnN0cmluZ2lmeShlcnIuc3RhY2spKTtcbiAgICBzZXJ2ZXIuY2xvc2UoKCkgPT4ge1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBIYW5kbGUgdGVybWluYXRpb24gc2lnbmFsc1xuICBwcm9jZXNzLm9uKCdTSUdURVJNJywgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGNoYWxrLmJnUmVkKCfwn5GLIFNJR1RFUk0gUkVDRUlWRUQuIFNodXR0aW5nIGRvd24gZ3JhY2VmdWxseScpKTtcbiAgICBzZXJ2ZXIuY2xvc2UoKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coY2hhbGsuYmdSZWQoJ/CfkqUgUHJvY2VzcyB0ZXJtaW5hdGVkJykpO1xuICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBTSUdBQlJUXG4gIHByb2Nlc3Mub24oJ1NJR0FCUlQnLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coY2hhbGsuYmdSZWQoJ/CfkYsgU0lHQUJSVCBSRUNFSVZFRC4gU2h1dHRpbmcgZG93biBncmFjZWZ1bGx5JykpO1xuICAgIHNlcnZlci5jbG9zZSgoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhjaGFsay5iZ1JlZCgn8J+SpSBQcm9jZXNzIHRlcm1pbmF0ZWQnKSk7XG4gICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgfSk7XG4gIH0pO1xufTtcbmNvbnN0IHNldHVwU2VydmVyID0gKGlzQ2x1c3RlclJlcXVpcmVkKSA9PiB7XG4gIC8vIGlmIGl0IGlzIGEgbWFzdGVyIHByb2Nlc3MgdGhlbiBjYWxsIHNldHRpbmcgdXAgd29ya2VyIHByb2Nlc3NcbiAgaWYgKGlzQ2x1c3RlclJlcXVpcmVkICYmIGNsdXN0ZXIuaXNNYXN0ZXIpIHtcbiAgICBzZXRVcFdvcmtlclByb2Nlc3NlcygpO1xuICB9IGVsc2Uge1xuICAgIC8vICAgU2V0dXAgc2VydmVyIGNvbmZpZyBhbmQgc2hhcmUgcG9ydCBhZGRyZXNzIGZvciBpbmNvbWluZyByZXF1ZXN0c1xuICAgIHNldFVwRXhwcmVzcygpO1xuICB9XG59O1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICBzZXR1cFNlcnZlcih0cnVlKTtcbn0gZWxzZSB7XG4gIHNldHVwU2VydmVyKGZhbHNlKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQzFCLE1BQU1DLEtBQUssR0FBR0QsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUU5QixNQUFNRSxPQUFPLEdBQUdGLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFFbEMsTUFBTTtFQUFFRztBQUFLLENBQUMsR0FBR0gsT0FBTyxDQUFDLElBQUksQ0FBQztBQUM5QjtBQUNBLE1BQU1JLE1BQU0sR0FBR0osT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNSyxHQUFHLEdBQUdMLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFFNUIsTUFBTU0sSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsSUFBSSxJQUFJLElBQUk7O0FBRXJDO0FBQ0FDLE9BQU8sQ0FBQ0UsRUFBRSxDQUFDLG1CQUFtQixFQUFHQyxHQUFHLElBQUs7RUFDdkNDLE9BQU8sQ0FB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","map":{"version":3,"names":["require","chalk","cluster","cpus","dotenv","app","PORT","process","env","on","err","console","log","red","stack","exit","workers","setUpWorkerProcesses","blue","length","i","push","fork","message","worker","pid","code","signal","newWorker","bgRed","setUpExpress","config","path","server","listen","greenBright","appErr","error","route","trace","JSON","stringify","close","setupServer","isClusterRequired","isMaster","NODE_ENV"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/","sources":["server.js"],"sourcesContent":["require('@babel/register');\nconst chalk = require('chalk');\n\nconst cluster = require('cluster');\n\nconst { cpus } = require('os');\n// import dotenv from \"dotenv\";\nconst dotenv = require('dotenv');\nconst app = require('./app');\n\nconst PORT = process.env.PORT || 3000;\n\n// Handle uncaught exceptions\nprocess.on('uncaughtException', (err) => {\n  console.log(chalk.red('Uncaught Exception: Shutting down...'));\n  console.log('Uncaught Exception: ', err);\n  console.log('Uncaught Exception Stack ', err.stack);\n  process.exit(1);\n});\n\nconst workers = [];\n\nconst setUpWorkerProcesses = () => {\n  // Use chalk to colorize the console\n  console.log(chalk.blue(`Master cluster setting up ${cpus().length} workers`));\n\n  // Iterate on CPUs length and create a worker for each CPU\n  for (let i = 0; i < cpus().length; i += 1) {\n    workers.push(cluster.fork());\n\n    // To receive messages from worker process\n    workers[i].on('message', (message) => {\n      console.log(message);\n    });\n  }\n\n  // process is clustered on a core and process id is assigned\n  cluster.on('online', (worker) => {\n    console.log(`Worker ${worker.process.pid} is listening`);\n  });\n\n  // If any of the worker process dies, then start a new one by simply forking another one\n  cluster.on('exit', (worker, code, signal) => {\n    console.log(`Worker ${worker.process.pid} died with code: ${code}, and signal: ${signal}`);\n    console.log('Starting a new worker');\n    cluster.fork();\n    workers.push(cluster.fork());\n    const newWorker = workers[workers.length - 1];\n    newWorker.on('message', (message) => {\n      // use chalk\n      console.log(chalk.bgRed(`Message from worker ${newWorker.process.pid}: ${message}`));\n    });\n  });\n};\n\nconst setUpExpress = () => {\n  dotenv.config({\n    path: './.env',\n  });\n\n  const server = app.listen(PORT, () => {\n    console.log(chalk.greenBright(`Server is running on port ${PORT}`));\n  });\n\n  app.on('error', (\n    appErr,\n  ) => {\n    console.error(chalk.bgRed(`app error: ${appErr.stack}`));\n    console.error(chalk.bgRed(`on url: ${appErr.route}`));\n    console.error(chalk.bgRed(`with headers: ${appErr.trace}`));\n  });\n\n  // Handle unhandled rejections\n  process.on('unhandledRejection', (err) => {\n    console.log(chalk.bgRed('UNHANDLED REJECTION! ðŸ’¥ Shutting down...'));\n    console.log('unhandledRejection Err::', err);\n    console.log('unhandledRejection Stack::', JSON.stringify(err.stack));\n    server.close(() => {\n      process.exit(1);\n    });\n  });\n\n  // Handle termination signals\n  process.on('SIGTERM', () => {\n    console.log(chalk.bgRed('ðŸ‘‹ SIGTERM RECEIVED. Shutting down gracefully'));\n    server.close(() => {\n      console.log(chalk.bgRed('ðŸ’¥ Process terminated'));\n      process.exit(0);\n    });\n  });\n\n  // SIGABRT\n  process.on('SIGABRT', () => {\n    console.log(chalk.bgRed('ðŸ‘‹ SIGABRT RECEIVED. Shutting down gracefully'));\n    server.close(() => {\n      console.log(chalk.bgRed('ðŸ’¥ Process terminated'));\n      process.exit(0);\n    });\n  });\n};\nconst setupServer = (isClusterRequired) => {\n  // if it is a master process then call setting up worker process\n  if (isClusterRequired && cluster.isMaster) {\n    setUpWorkerProcesses();\n  } else {\n    //   Setup server config and share port address for incoming requests\n    setUpExpress();\n  }\n};\n\nif (process.env.NODE_ENV === 'production') {\n  setupServer(true);\n} else {\n  setupServer(false);\n}\n"],"mappings":"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"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _auth = _interopRequireDefault(require(\"./src/routes/auth.routes\"));\nvar _logger = _interopRequireDefault(require(\"./src/utils/logger\"));\nvar _errorHandler = _interopRequireDefault(require(\"./src/middlewares/errorHandler\"));\nvar _utils = require(\"./src/utils\");\nvar _stats = _interopRequireDefault(require(\"./src/routes/stats.routes\"));\nconst express = require('express');\nconst morgan = require('morgan');\nconst chalk = require('chalk');\nconst dotenv = require('dotenv');\nconst cors = require('cors');\nconst rTracer = require('cls-rtracer');\nconst app = express();\ndotenv.config();\nrequire('./src/config/sequelize');\n\n// Tracer\napp.use(rTracer.expressMiddleware());\n\n// cors\napp.use(cors());\n\n// logging\nif (process.env.NODE_ENV === 'development') {\n  app.use(morgan('combined'));\n}\napp.use(express.json());\napp.use('/api/v1/auth', _auth.default);\napp.use('/api/v1/stats', _stats.default);\napp.use(_errorHandler.default);\napp.all('*', (req, res) => {\n  _logger.default.info(chalk.bgYellow('Route not found'));\n  (0, _utils.errorResponse)(req, res, 'Route not found', 404);\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIm1vcmdhbiIsImNoYWxrIiwiZG90ZW52IiwiY29ycyIsInJUcmFjZXIiLCJhcHAiLCJjb25maWciLCJ1c2UiLCJleHByZXNzTWlkZGxld2FyZSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImpzb24iLCJhdXRoUm91dGVzIiwic3RhdHNSb3V0ZXMiLCJlcnJvckhhbmRsZXIiLCJhbGwiLCJyZXEiLCJyZXMiLCJsb2dnZXIiLCJpbmZvIiwiYmdZZWxsb3ciLCJlcnJvclJlc3BvbnNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci8iLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXV0aFJvdXRlcyBmcm9tICcuL3NyYy9yb3V0ZXMvYXV0aC5yb3V0ZXMnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICcuL3NyYy91dGlscy9sb2dnZXInO1xuaW1wb3J0IGVycm9ySGFuZGxlciBmcm9tICcuL3NyYy9taWRkbGV3YXJlcy9lcnJvckhhbmRsZXInO1xuaW1wb3J0IHsgZXJyb3JSZXNwb25zZSB9IGZyb20gJy4vc3JjL3V0aWxzJztcbmltcG9ydCBzdGF0c1JvdXRlcyBmcm9tICcuL3NyYy9yb3V0ZXMvc3RhdHMucm91dGVzJztcblxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IG1vcmdhbiA9IHJlcXVpcmUoJ21vcmdhbicpO1xuY29uc3QgY2hhbGsgPSByZXF1aXJlKCdjaGFsaycpO1xuXG5jb25zdCBkb3RlbnYgPSByZXF1aXJlKCdkb3RlbnYnKTtcblxuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcblxuY29uc3QgclRyYWNlciA9IHJlcXVpcmUoJ2Nscy1ydHJhY2VyJyk7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuZG90ZW52LmNvbmZpZygpO1xuXG5yZXF1aXJlKCcuL3NyYy9jb25maWcvc2VxdWVsaXplJyk7XG5cbi8vIFRyYWNlclxuYXBwLnVzZShyVHJhY2VyLmV4cHJlc3NNaWRkbGV3YXJlKCkpO1xuXG4vLyBjb3JzXG5hcHAudXNlKGNvcnMoKSk7XG5cbi8vIGxvZ2dpbmdcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICBhcHAudXNlKG1vcmdhbignY29tYmluZWQnKSk7XG59XG5cbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuXG5hcHAudXNlKCcvYXBpL3YxL2F1dGgnLCBhdXRoUm91dGVzKTtcbmFwcC51c2UoJy9hcGkvdjEvc3RhdHMnLCBzdGF0c1JvdXRlcyk7XG5cbmFwcC51c2UoZXJyb3JIYW5kbGVyKTtcblxuYXBwLmFsbCgnKicsIChyZXEsIHJlcykgPT4ge1xuICBsb2dnZXIuaW5mbyhjaGFsay5iZ1llbGxvdygnUm91dGUgbm90IGZvdW5kJykpO1xuICBlcnJvclJlc3BvbnNlKHJlcSwgcmVzLCAnUm91dGUgbm90IGZvdW5kJywgNDA0KTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDtcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTUUsS0FBSyxHQUFHRixPQUFPLENBQUMsT0FBTyxDQUFDO0FBRTlCLE1BQU1HLE1BQU0sR0FBR0gsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUVoQyxNQUFNSSxJQUFJLEdBQUdKLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFFNUIsTUFBTUssT0FBTyxHQUFHTCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBRXRDLE1BQU1NLEdBQUcsR0FBR1AsT0FBTyxFQUFFO0FBRXJCSSxNQUFNLENBQUNJLE1BQU0sRUFBRTtBQUVmUCxPQUFPLENBQUMsd0JBQXdCLENBQUM7O0FBRWpDO0FBQ0FNLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDSCxPQUFPLENBQUNJLGlCQUFpQixFQUFFLENBQUM7O0FBRXBDO0FBQ0FILEdBQUcsQ0FBQ0UsR0FBRyxDQUFDSixJQUFJLEVBQUUsQ0FBQzs7QUFFZjtBQUNBLElBQUlNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxFQUFFO0VBQzFDTixHQUFHLENBQUNFLEdBQUcsQ0FBQ1AsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzdCO0FBRUFLLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDVCxPQUFPLENBQUNjLElBQUksRUFBRSxDQUFDO0FBRXZCUCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxjQUFjLEVBQUVNLGFBQVUsQ0FBQztBQUNuQ1IsR0FBRyxDQUFDRSxHQUFHLENBQUMsZUFBZSxFQUFFTyxjQUFXLENBQUM7QUFFckNULEdBQUcsQ0FBQ0UsR0FBRyxDQUFDUSxxQkFBWSxDQUFDO0FBRXJCVixHQUFHLENBQUNXLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDekJDLGVBQU0sQ0FBQ0MsSUFBSSxDQUFDbkIsS0FBSyxDQUFDb0IsUUFBUSxDQUFDLGlCQUFpQixDQUFDLENBQUM7RUFDOUMsSUFBQUMsb0JBQWEsRUFBQ0wsR0FBRyxFQUFFQyxHQUFHLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxDQUFDO0FBQ2pELENBQUMsQ0FBQztBQUVGSyxNQUFNLENBQUNDLE9BQU8sR0FBR25CLEdBQUcifQ==","map":{"version":3,"names":["express","require","morgan","chalk","dotenv","cors","rTracer","app","config","use","expressMiddleware","process","env","NODE_ENV","json","authRoutes","statsRoutes","errorHandler","all","req","res","logger","info","bgYellow","errorResponse","module","exports"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/","sources":["app.js"],"sourcesContent":["import authRoutes from './src/routes/auth.routes';\nimport logger from './src/utils/logger';\nimport errorHandler from './src/middlewares/errorHandler';\nimport { errorResponse } from './src/utils';\nimport statsRoutes from './src/routes/stats.routes';\n\nconst express = require('express');\nconst morgan = require('morgan');\nconst chalk = require('chalk');\n\nconst dotenv = require('dotenv');\n\nconst cors = require('cors');\n\nconst rTracer = require('cls-rtracer');\n\nconst app = express();\n\ndotenv.config();\n\nrequire('./src/config/sequelize');\n\n// Tracer\napp.use(rTracer.expressMiddleware());\n\n// cors\napp.use(cors());\n\n// logging\nif (process.env.NODE_ENV === 'development') {\n  app.use(morgan('combined'));\n}\n\napp.use(express.json());\n\napp.use('/api/v1/auth', authRoutes);\napp.use('/api/v1/stats', statsRoutes);\n\napp.use(errorHandler);\n\napp.all('*', (req, res) => {\n  logger.info(chalk.bgYellow('Route not found'));\n  errorResponse(req, res, 'Route not found', 404);\n});\n\nmodule.exports = app;\n"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAME,KAAK,GAAGF,OAAO,CAAC,OAAO,CAAC;AAE9B,MAAMG,MAAM,GAAGH,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAMI,IAAI,GAAGJ,OAAO,CAAC,MAAM,CAAC;AAE5B,MAAMK,OAAO,GAAGL,OAAO,CAAC,aAAa,CAAC;AAEtC,MAAMM,GAAG,GAAGP,OAAO,EAAE;AAErBI,MAAM,CAACI,MAAM,EAAE;AAEfP,OAAO,CAAC,wBAAwB,CAAC;;AAEjC;AACAM,GAAG,CAACE,GAAG,CAACH,OAAO,CAACI,iBAAiB,EAAE,CAAC;;AAEpC;AACAH,GAAG,CAACE,GAAG,CAACJ,IAAI,EAAE,CAAC;;AAEf;AACA,IAAIM,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;EAC1CN,GAAG,CAACE,GAAG,CAACP,MAAM,CAAC,UAAU,CAAC,CAAC;AAC7B;AAEAK,GAAG,CAACE,GAAG,CAACT,OAAO,CAACc,IAAI,EAAE,CAAC;AAEvBP,GAAG,CAACE,GAAG,CAAC,cAAc,EAAEM,aAAU,CAAC;AACnCR,GAAG,CAACE,GAAG,CAAC,eAAe,EAAEO,cAAW,CAAC;AAErCT,GAAG,CAACE,GAAG,CAACQ,qBAAY,CAAC;AAErBV,GAAG,CAACW,GAAG,CAAC,GAAG,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzBC,eAAM,CAACC,IAAI,CAACnB,KAAK,CAACoB,QAAQ,CAAC,iBAAiB,CAAC,CAAC;EAC9C,IAAAC,oBAAa,EAACL,GAAG,EAAEC,GAAG,EAAE,iBAAiB,EAAE,GAAG,CAAC;AACjD,CAAC,CAAC;AAEFK,MAAM,CAACC,OAAO,GAAGnB,GAAG"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/routes/auth.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressValidation = require(\"express-validation\");\nvar authValidator = _interopRequireWildcard(require(\"../controllers/auth/auth.validator\"));\nvar authController = _interopRequireWildcard(require(\"../controllers/auth/auth.controller\"));\nvar _requireAuth = _interopRequireDefault(require(\"../middlewares/requireAuth\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nconst router = _express.default.Router();\n\n/**  Register a new user\n* @route POST /api/auth/register\n* @Body email, password, confirmPassword\n* @desc Register a new user\n* @access Public\n*/\nrouter.post('/register', (0, _expressValidation.validate)(authValidator.registerSchema, {\n  keyByField: true\n}, {\n  allowUnknown: true,\n  abortEarly: false,\n  errors: {\n    wrap: {\n      label: ''\n    }\n  }\n}), authController.register);\n\n/**  Login a user\n * @route POST /api/auth/login\n * @Body email, password\n * @desc Login a user\n * @access Public\n *\n * */\nrouter.post('/login', (0, _expressValidation.validate)(authValidator.loginSchema), authController.login);\n\n/**  Logout a user\n * @route POST /api/auth/logout\n * @desc Logout a user\n * @access Private\n *\n * */\nrouter.post('/logout', authController.logout);\n\n/**  Get current user\n * @route GET /api/auth/current\n * @desc Get current user\n * @access Private\n * */\nrouter.get('/current', _requireAuth.default, authController.getCurrentUser);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwicG9zdCIsInZhbGlkYXRlIiwiYXV0aFZhbGlkYXRvciIsInJlZ2lzdGVyU2NoZW1hIiwia2V5QnlGaWVsZCIsImFsbG93VW5rbm93biIsImFib3J0RWFybHkiLCJlcnJvcnMiLCJ3cmFwIiwibGFiZWwiLCJhdXRoQ29udHJvbGxlciIsInJlZ2lzdGVyIiwibG9naW5TY2hlbWEiLCJsb2dpbiIsImxvZ291dCIsImdldCIsInJlcXVpcmVBdXRoIiwiZ2V0Q3VycmVudFVzZXIiXSwic291cmNlUm9vdCI6Ii9ob21lL3N0dW5uYS9Eb2N1bWVudHMvZGV2L3dhdGVyLWxldmVsLWFuZC1xdWFsaXR5LXNlbnNvci93YXRlcl9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGgucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tICdleHByZXNzLXZhbGlkYXRpb24nO1xuaW1wb3J0ICogYXMgYXV0aFZhbGlkYXRvciBmcm9tICcuLi9jb250cm9sbGVycy9hdXRoL2F1dGgudmFsaWRhdG9yJztcbmltcG9ydCAqIGFzIGF1dGhDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL2F1dGgvYXV0aC5jb250cm9sbGVyJztcbmltcG9ydCByZXF1aXJlQXV0aCBmcm9tICcuLi9taWRkbGV3YXJlcy9yZXF1aXJlQXV0aCc7XG5cbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8qKiAgUmVnaXN0ZXIgYSBuZXcgdXNlclxuKiBAcm91dGUgUE9TVCAvYXBpL2F1dGgvcmVnaXN0ZXJcbiogQEJvZHkgZW1haWwsIHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmRcbiogQGRlc2MgUmVnaXN0ZXIgYSBuZXcgdXNlclxuKiBAYWNjZXNzIFB1YmxpY1xuKi9cbnJvdXRlci5wb3N0KFxuICAnL3JlZ2lzdGVyJyxcbiAgdmFsaWRhdGUoXG4gICAgYXV0aFZhbGlkYXRvci5yZWdpc3RlclNjaGVtYSxcbiAgICB7IGtleUJ5RmllbGQ6IHRydWUgfSxcbiAgICB7IGFsbG93VW5rbm93bjogdHJ1ZSwgYWJvcnRFYXJseTogZmFsc2UsIGVycm9yczogeyB3cmFwOiB7IGxhYmVsOiAnJyB9IH0gfSxcbiAgKSxcbiAgYXV0aENvbnRyb2xsZXIucmVnaXN0ZXIsXG4pO1xuXG4vKiogIExvZ2luIGEgdXNlclxuICogQHJvdXRlIFBPU1QgL2FwaS9hdXRoL2xvZ2luXG4gKiBAQm9keSBlbWFpbCwgcGFzc3dvcmRcbiAqIEBkZXNjIExvZ2luIGEgdXNlclxuICogQGFjY2VzcyBQdWJsaWNcbiAqXG4gKiAqL1xucm91dGVyLnBvc3QoXG4gICcvbG9naW4nLFxuICB2YWxpZGF0ZShhdXRoVmFsaWRhdG9yLmxvZ2luU2NoZW1hKSxcbiAgYXV0aENvbnRyb2xsZXIubG9naW4sXG4pO1xuXG4vKiogIExvZ291dCBhIHVzZXJcbiAqIEByb3V0ZSBQT1NUIC9hcGkvYXV0aC9sb2dvdXRcbiAqIEBkZXNjIExvZ291dCBhIHVzZXJcbiAqIEBhY2Nlc3MgUHJpdmF0ZVxuICpcbiAqICovXG5yb3V0ZXIucG9zdCgnL2xvZ291dCcsIGF1dGhDb250cm9sbGVyLmxvZ291dCk7XG5cbi8qKiAgR2V0IGN1cnJlbnQgdXNlclxuICogQHJvdXRlIEdFVCAvYXBpL2F1dGgvY3VycmVudFxuICogQGRlc2MgR2V0IGN1cnJlbnQgdXNlclxuICogQGFjY2VzcyBQcml2YXRlXG4gKiAqL1xucm91dGVyLmdldChcbiAgJy9jdXJyZW50JyxcbiAgcmVxdWlyZUF1dGgsXG4gIGF1dGhDb250cm9sbGVyLmdldEN1cnJlbnRVc2VyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFxRDtBQUFBO0FBRXJELE1BQU1BLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUYsTUFBTSxDQUFDRyxJQUFJLENBQ1QsV0FBVyxFQUNYLElBQUFDLDJCQUFRLEVBQ05DLGFBQWEsQ0FBQ0MsY0FBYyxFQUM1QjtFQUFFQyxVQUFVLEVBQUU7QUFBSyxDQUFDLEVBQ3BCO0VBQUVDLFlBQVksRUFBRSxJQUFJO0VBQUVDLFVBQVUsRUFBRSxLQUFLO0VBQUVDLE1BQU0sRUFBRTtJQUFFQyxJQUFJLEVBQUU7TUFBRUMsS0FBSyxFQUFFO0lBQUc7RUFBRTtBQUFFLENBQUMsQ0FDM0UsRUFDREMsY0FBYyxDQUFDQyxRQUFRLENBQ3hCOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FkLE1BQU0sQ0FBQ0csSUFBSSxDQUNULFFBQVEsRUFDUixJQUFBQywyQkFBUSxFQUFDQyxhQUFhLENBQUNVLFdBQVcsQ0FBQyxFQUNuQ0YsY0FBYyxDQUFDRyxLQUFLLENBQ3JCOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBaEIsTUFBTSxDQUFDRyxJQUFJLENBQUMsU0FBUyxFQUFFVSxjQUFjLENBQUNJLE1BQU0sQ0FBQzs7QUFFN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBakIsTUFBTSxDQUFDa0IsR0FBRyxDQUNSLFVBQVUsRUFDVkMsb0JBQVcsRUFDWE4sY0FBYyxDQUFDTyxjQUFjLENBQzlCO0FBQUMsZUFFYXBCLE1BQU07QUFBQSJ9","map":{"version":3,"names":["router","express","Router","post","validate","authValidator","registerSchema","keyByField","allowUnknown","abortEarly","errors","wrap","label","authController","register","loginSchema","login","logout","get","requireAuth","getCurrentUser"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/routes/","sources":["auth.routes.js"],"sourcesContent":["import express from 'express';\nimport { validate } from 'express-validation';\nimport * as authValidator from '../controllers/auth/auth.validator';\nimport * as authController from '../controllers/auth/auth.controller';\nimport requireAuth from '../middlewares/requireAuth';\n\nconst router = express.Router();\n\n/**  Register a new user\n* @route POST /api/auth/register\n* @Body email, password, confirmPassword\n* @desc Register a new user\n* @access Public\n*/\nrouter.post(\n  '/register',\n  validate(\n    authValidator.registerSchema,\n    { keyByField: true },\n    { allowUnknown: true, abortEarly: false, errors: { wrap: { label: '' } } },\n  ),\n  authController.register,\n);\n\n/**  Login a user\n * @route POST /api/auth/login\n * @Body email, password\n * @desc Login a user\n * @access Public\n *\n * */\nrouter.post(\n  '/login',\n  validate(authValidator.loginSchema),\n  authController.login,\n);\n\n/**  Logout a user\n * @route POST /api/auth/logout\n * @desc Logout a user\n * @access Private\n *\n * */\nrouter.post('/logout', authController.logout);\n\n/**  Get current user\n * @route GET /api/auth/current\n * @desc Get current user\n * @access Private\n * */\nrouter.get(\n  '/current',\n  requireAuth,\n  authController.getCurrentUser,\n);\n\nexport default router;\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAqD;AAAA;AAErD,MAAMA,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACAF,MAAM,CAACG,IAAI,CACT,WAAW,EACX,IAAAC,2BAAQ,EACNC,aAAa,CAACC,cAAc,EAC5B;EAAEC,UAAU,EAAE;AAAK,CAAC,EACpB;EAAEC,YAAY,EAAE,IAAI;EAAEC,UAAU,EAAE,KAAK;EAAEC,MAAM,EAAE;IAAEC,IAAI,EAAE;MAAEC,KAAK,EAAE;IAAG;EAAE;AAAE,CAAC,CAC3E,EACDC,cAAc,CAACC,QAAQ,CACxB;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACAd,MAAM,CAACG,IAAI,CACT,QAAQ,EACR,IAAAC,2BAAQ,EAACC,aAAa,CAACU,WAAW,CAAC,EACnCF,cAAc,CAACG,KAAK,CACrB;;AAED;AACA;AACA;AACA;AACA;AACA;AACAhB,MAAM,CAACG,IAAI,CAAC,SAAS,EAAEU,cAAc,CAACI,MAAM,CAAC;;AAE7C;AACA;AACA;AACA;AACA;AACAjB,MAAM,CAACkB,GAAG,CACR,UAAU,EACVC,oBAAW,EACXN,cAAc,CAACO,cAAc,CAC9B;AAAC,eAEapB,MAAM;AAAA"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/auth.validator.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerSchema = exports.loginSchema = void 0;\nvar _expressValidation = require(\"express-validation\");\nvar _logger = _interopRequireDefault(require(\"../../utils/logger\"));\n_logger.default.info('Started \\'authValidator\\' controller');\nconst registerSchema = {\n  body: _expressValidation.Joi.object({\n    email: _expressValidation.Joi.string().email().trim().required(),\n    password: _expressValidation.Joi.string().required(),\n    confirmPassword: _expressValidation.Joi.string().required()\n  })\n};\nexports.registerSchema = registerSchema;\nconst loginSchema = {\n  body: _expressValidation.Joi.object({\n    email: _expressValidation.Joi.string().email().trim().required(),\n    password: _expressValidation.Joi.string().required()\n  })\n};\nexports.loginSchema = loginSchema;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dnZXIiLCJpbmZvIiwicmVnaXN0ZXJTY2hlbWEiLCJib2R5IiwiSm9pIiwib2JqZWN0IiwiZW1haWwiLCJzdHJpbmciLCJ0cmltIiwicmVxdWlyZWQiLCJwYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsImxvZ2luU2NoZW1hIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9zdHVubmEvRG9jdW1lbnRzL2Rldi93YXRlci1sZXZlbC1hbmQtcXVhbGl0eS1zZW5zb3Ivd2F0ZXJfc2VydmVyL3NyYy9jb250cm9sbGVycy9hdXRoLyIsInNvdXJjZXMiOlsiYXV0aC52YWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSm9pIH0gZnJvbSAnZXhwcmVzcy12YWxpZGF0aW9uJztcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vLi4vdXRpbHMvbG9nZ2VyJztcblxubG9nZ2VyLmluZm8oJ1N0YXJ0ZWQgXFwnYXV0aFZhbGlkYXRvclxcJyBjb250cm9sbGVyJyk7XG5leHBvcnQgY29uc3QgcmVnaXN0ZXJTY2hlbWEgPSB7XG4gIGJvZHk6IEpvaS5vYmplY3Qoe1xuICAgIGVtYWlsOiBKb2kuc3RyaW5nKCkuZW1haWwoKS50cmltKCkucmVxdWlyZWQoKSxcbiAgICBwYXNzd29yZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgY29uZmlybVBhc3N3b3JkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgfSksXG59O1xuXG5leHBvcnQgY29uc3QgbG9naW5TY2hlbWEgPSB7XG4gIGJvZHk6IEpvaS5vYmplY3Qoe1xuICAgIGVtYWlsOiBKb2kuc3RyaW5nKCkuZW1haWwoKS50cmltKCkucmVxdWlyZWQoKSxcbiAgICBwYXNzd29yZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIH0pLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFFQUEsZUFBTSxDQUFDQyxJQUFJLENBQUMsc0NBQXNDLENBQUM7QUFDNUMsTUFBTUMsY0FBYyxHQUFHO0VBQzVCQyxJQUFJLEVBQUVDLHNCQUFHLENBQUNDLE1BQU0sQ0FBQztJQUNmQyxLQUFLLEVBQUVGLHNCQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDRCxLQUFLLEVBQUUsQ0FBQ0UsSUFBSSxFQUFFLENBQUNDLFFBQVEsRUFBRTtJQUM3Q0MsUUFBUSxFQUFFTixzQkFBRyxDQUFDRyxNQUFNLEVBQUUsQ0FBQ0UsUUFBUSxFQUFFO0lBQ2pDRSxlQUFlLEVBQUVQLHNCQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDRSxRQUFRO0VBQ3hDLENBQUM7QUFDSCxDQUFDO0FBQUM7QUFFSyxNQUFNRyxXQUFXLEdBQUc7RUFDekJULElBQUksRUFBRUMsc0JBQUcsQ0FBQ0MsTUFBTSxDQUFDO0lBQ2ZDLEtBQUssRUFBRUYsc0JBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNELEtBQUssRUFBRSxDQUFDRSxJQUFJLEVBQUUsQ0FBQ0MsUUFBUSxFQUFFO0lBQzdDQyxRQUFRLEVBQUVOLHNCQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDRSxRQUFRO0VBQ2pDLENBQUM7QUFDSCxDQUFDO0FBQUMifQ==","map":{"version":3,"names":["logger","info","registerSchema","body","Joi","object","email","string","trim","required","password","confirmPassword","loginSchema"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/","sources":["auth.validator.js"],"sourcesContent":["import { Joi } from 'express-validation';\nimport logger from '../../utils/logger';\n\nlogger.info('Started \\'authValidator\\' controller');\nexport const registerSchema = {\n  body: Joi.object({\n    email: Joi.string().email().trim().required(),\n    password: Joi.string().required(),\n    confirmPassword: Joi.string().required(),\n  }),\n};\n\nexport const loginSchema = {\n  body: Joi.object({\n    email: Joi.string().email().trim().required(),\n    password: Joi.string().required(),\n  }),\n};\n"],"mappings":";;;;;;;AAAA;AACA;AAEAA,eAAM,CAACC,IAAI,CAAC,sCAAsC,CAAC;AAC5C,MAAMC,cAAc,GAAG;EAC5BC,IAAI,EAAEC,sBAAG,CAACC,MAAM,CAAC;IACfC,KAAK,EAAEF,sBAAG,CAACG,MAAM,EAAE,CAACD,KAAK,EAAE,CAACE,IAAI,EAAE,CAACC,QAAQ,EAAE;IAC7CC,QAAQ,EAAEN,sBAAG,CAACG,MAAM,EAAE,CAACE,QAAQ,EAAE;IACjCE,eAAe,EAAEP,sBAAG,CAACG,MAAM,EAAE,CAACE,QAAQ;EACxC,CAAC;AACH,CAAC;AAAC;AAEK,MAAMG,WAAW,GAAG;EACzBT,IAAI,EAAEC,sBAAG,CAACC,MAAM,CAAC;IACfC,KAAK,EAAEF,sBAAG,CAACG,MAAM,EAAE,CAACD,KAAK,EAAE,CAACE,IAAI,EAAE,CAACC,QAAQ,EAAE;IAC7CC,QAAQ,EAAEN,sBAAG,CAACG,MAAM,EAAE,CAACE,QAAQ;EACjC,CAAC;AACH,CAAC;AAAC"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/utils/logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _clsRtracer = _interopRequireDefault(require(\"cls-rtracer\"));\nvar _winston = require(\"winston\");\nconst {\n  combine,\n  timestamp,\n  label,\n  printf\n} = _winston.format;\nconst myFormat = printf(info => {\n  const rid = _clsRtracer.default.id();\n  return rid ? `${info.timestamp} [request-id:${rid}]: ${info.message}` : `${info.timestamp}: ${info.message}`;\n});\nconst logger = (0, _winston.createLogger)({\n  format: combine(label({\n    label: 'my-app'\n  }), timestamp(), myFormat),\n  transports: [new _winston.transports.Console(), new _winston.transports.File({\n    filename: 'error.log',\n    level: 'error'\n  }), new _winston.transports.File({\n    filename: 'combined.log'\n  })]\n});\nvar _default = logger;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb21iaW5lIiwidGltZXN0YW1wIiwibGFiZWwiLCJwcmludGYiLCJmb3JtYXQiLCJteUZvcm1hdCIsImluZm8iLCJyaWQiLCJyVHJhY2VyIiwiaWQiLCJtZXNzYWdlIiwibG9nZ2VyIiwiY3JlYXRlTG9nZ2VyIiwidHJhbnNwb3J0cyIsIkNvbnNvbGUiLCJGaWxlIiwiZmlsZW5hbWUiLCJsZXZlbCJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJsb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJUcmFjZXIgZnJvbSAnY2xzLXJ0cmFjZXInO1xuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyLCBmb3JtYXQsIHRyYW5zcG9ydHMgfSBmcm9tICd3aW5zdG9uJztcblxuY29uc3Qge1xuICBjb21iaW5lLCB0aW1lc3RhbXAsIGxhYmVsLCBwcmludGYsXG59ID0gZm9ybWF0O1xuXG5jb25zdCBteUZvcm1hdCA9IHByaW50ZigoaW5mbykgPT4ge1xuICBjb25zdCByaWQgPSByVHJhY2VyLmlkKCk7XG4gIHJldHVybiByaWRcbiAgICA/IGAke2luZm8udGltZXN0YW1wfSBbcmVxdWVzdC1pZDoke3JpZH1dOiAke2luZm8ubWVzc2FnZX1gXG4gICAgOiBgJHtpbmZvLnRpbWVzdGFtcH06ICR7aW5mby5tZXNzYWdlfWA7XG59KTtcblxuY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKHtcbiAgZm9ybWF0OiBjb21iaW5lKFxuICAgIGxhYmVsKHsgbGFiZWw6ICdteS1hcHAnIH0pLFxuICAgIHRpbWVzdGFtcCgpLFxuICAgIG15Rm9ybWF0LFxuICApLFxuICB0cmFuc3BvcnRzOiBbXG4gICAgbmV3IHRyYW5zcG9ydHMuQ29uc29sZSgpLFxuICAgIG5ldyB0cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2Vycm9yLmxvZycsIGxldmVsOiAnZXJyb3InIH0pLFxuICAgIG5ldyB0cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2NvbWJpbmVkLmxvZycgfSksXG4gIF0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUVBLE1BQU07RUFDSkEsT0FBTztFQUFFQyxTQUFTO0VBQUVDLEtBQUs7RUFBRUM7QUFDN0IsQ0FBQyxHQUFHQyxlQUFNO0FBRVYsTUFBTUMsUUFBUSxHQUFHRixNQUFNLENBQUVHLElBQUksSUFBSztFQUNoQyxNQUFNQyxHQUFHLEdBQUdDLG1CQUFPLENBQUNDLEVBQUUsRUFBRTtFQUN4QixPQUFPRixHQUFHLEdBQ0wsR0FBRUQsSUFBSSxDQUFDTCxTQUFVLGdCQUFlTSxHQUFJLE1BQUtELElBQUksQ0FBQ0ksT0FBUSxFQUFDLEdBQ3ZELEdBQUVKLElBQUksQ0FBQ0wsU0FBVSxLQUFJSyxJQUFJLENBQUNJLE9BQVEsRUFBQztBQUMxQyxDQUFDLENBQUM7QUFFRixNQUFNQyxNQUFNLEdBQUcsSUFBQUMscUJBQVksRUFBQztFQUMxQlIsTUFBTSxFQUFFSixPQUFPLENBQ2JFLEtBQUssQ0FBQztJQUFFQSxLQUFLLEVBQUU7RUFBUyxDQUFDLENBQUMsRUFDMUJELFNBQVMsRUFBRSxFQUNYSSxRQUFRLENBQ1Q7RUFDRFEsVUFBVSxFQUFFLENBQ1YsSUFBSUEsbUJBQVUsQ0FBQ0MsT0FBTyxFQUFFLEVBQ3hCLElBQUlELG1CQUFVLENBQUNFLElBQUksQ0FBQztJQUFFQyxRQUFRLEVBQUUsV0FBVztJQUFFQyxLQUFLLEVBQUU7RUFBUSxDQUFDLENBQUMsRUFDOUQsSUFBSUosbUJBQVUsQ0FBQ0UsSUFBSSxDQUFDO0lBQUVDLFFBQVEsRUFBRTtFQUFlLENBQUMsQ0FBQztBQUVyRCxDQUFDLENBQUM7QUFBQyxlQUVZTCxNQUFNO0FBQUEifQ==","map":{"version":3,"names":["combine","timestamp","label","printf","format","myFormat","info","rid","rTracer","id","message","logger","createLogger","transports","Console","File","filename","level"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/utils/","sources":["logger.js"],"sourcesContent":["import rTracer from 'cls-rtracer';\nimport { createLogger, format, transports } from 'winston';\n\nconst {\n  combine, timestamp, label, printf,\n} = format;\n\nconst myFormat = printf((info) => {\n  const rid = rTracer.id();\n  return rid\n    ? `${info.timestamp} [request-id:${rid}]: ${info.message}`\n    : `${info.timestamp}: ${info.message}`;\n});\n\nconst logger = createLogger({\n  format: combine(\n    label({ label: 'my-app' }),\n    timestamp(),\n    myFormat,\n  ),\n  transports: [\n    new transports.Console(),\n    new transports.File({ filename: 'error.log', level: 'error' }),\n    new transports.File({ filename: 'combined.log' }),\n  ],\n});\n\nexport default logger;\n"],"mappings":";;;;;;;AAAA;AACA;AAEA,MAAM;EACJA,OAAO;EAAEC,SAAS;EAAEC,KAAK;EAAEC;AAC7B,CAAC,GAAGC,eAAM;AAEV,MAAMC,QAAQ,GAAGF,MAAM,CAAEG,IAAI,IAAK;EAChC,MAAMC,GAAG,GAAGC,mBAAO,CAACC,EAAE,EAAE;EACxB,OAAOF,GAAG,GACL,GAAED,IAAI,CAACL,SAAU,gBAAeM,GAAI,MAAKD,IAAI,CAACI,OAAQ,EAAC,GACvD,GAAEJ,IAAI,CAACL,SAAU,KAAIK,IAAI,CAACI,OAAQ,EAAC;AAC1C,CAAC,CAAC;AAEF,MAAMC,MAAM,GAAG,IAAAC,qBAAY,EAAC;EAC1BR,MAAM,EAAEJ,OAAO,CACbE,KAAK,CAAC;IAAEA,KAAK,EAAE;EAAS,CAAC,CAAC,EAC1BD,SAAS,EAAE,EACXI,QAAQ,CACT;EACDQ,UAAU,EAAE,CACV,IAAIA,mBAAU,CAACC,OAAO,EAAE,EACxB,IAAID,mBAAU,CAACE,IAAI,CAAC;IAAEC,QAAQ,EAAE,WAAW;IAAEC,KAAK,EAAE;EAAQ,CAAC,CAAC,EAC9D,IAAIJ,mBAAU,CAACE,IAAI,CAAC;IAAEC,QAAQ,EAAE;EAAe,CAAC,CAAC;AAErD,CAAC,CAAC;AAAC,eAEYL,MAAM;AAAA"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/auth.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.register = exports.logout = exports.login = exports.getCurrentUser = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _logger = _interopRequireDefault(require(\"../../utils/logger\"));\nvar _models = _interopRequireDefault(require(\"../../db/models\"));\nvar _password = _interopRequireDefault(require(\"../../services/password\"));\nvar _utils = require(\"../../utils\");\nconst register = async (req, res) => {\n  _logger.default.info('Registering user');\n  try {\n    const {\n      email,\n      password,\n      confirmPassword\n    } = req.body;\n\n    // Check if passwords match\n    if (password !== confirmPassword) {\n      throw new Error('Passwords do not match');\n    }\n\n    // Check if user already exists\n    const user = await _models.default.findOne({\n      where: {\n        email\n      }\n    });\n    if (user) {\n      throw new Error('User already exists');\n    }\n\n    // Hash password\n    const hashedPassword = await _password.default.toHash(password);\n\n    // Create user\n    try {\n      await _models.default.create({\n        email,\n        password: hashedPassword\n      });\n    } catch (error) {\n      _logger.default.error(error);\n      throw new Error('Error creating user');\n    }\n    return (0, _utils.successResponse)(req, res, 'User created successfully', 201);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 'Failed', 500);\n  }\n};\nexports.register = register;\nconst login = async (req, res) => {\n  _logger.default.info('Logging in user');\n  try {\n    const {\n      email,\n      password\n    } = req.body;\n\n    // Check if user exists\n    const user = await _models.default.findOne({\n      where: {\n        email\n      }\n    });\n    if (!user) {\n      throw new Error('User does not exist');\n    }\n\n    // Check if password is correct\n    const isPasswordCorrect = await _password.default.compare(user.password, password);\n    if (!isPasswordCorrect) {\n      throw new Error('Incorrect password');\n    }\n\n    // Generate token\n    const token = _jsonwebtoken.default.sign({\n      id: user.id,\n      email: user.email,\n      createdAt: new Date()\n    }, process.env.JWT_SECRET, {\n      expiresIn: '30d'\n    });\n    const data = {\n      token,\n      user: {\n        id: user.id,\n        email: user.email\n      }\n    };\n    return (0, _utils.successResponse)(req, res, data, 200);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 400);\n  }\n};\nexports.login = login;\nconst logout = async (req, res) => {\n  _logger.default.info('Logging out user');\n  try {\n    req.headers['x-token'] = null;\n    req.headers = {};\n    return (0, _utils.successResponse)(req, res, 'User logged out successfully', null);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 400);\n  }\n};\nexports.logout = logout;\nconst getCurrentUser = async (req, res) => {\n  _logger.default.info('Getting current user');\n  try {\n    const user = await _models.default.findOne({\n      where: {\n        id: req.user.id\n      }\n    });\n    return (0, _utils.successResponse)(req, res, user, 200);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 400);\n  }\n};\nexports.getCurrentUser = getCurrentUser;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3RlciIsInJlcSIsInJlcyIsImxvZ2dlciIsImluZm8iLCJlbWFpbCIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiYm9keSIsIkVycm9yIiwidXNlciIsIlVzZXIiLCJmaW5kT25lIiwid2hlcmUiLCJoYXNoZWRQYXNzd29yZCIsIlBhc3N3b3JkIiwidG9IYXNoIiwiY3JlYXRlIiwiZXJyb3IiLCJzdWNjZXNzUmVzcG9uc2UiLCJlcnJvclJlc3BvbnNlIiwibWVzc2FnZSIsImxvZ2luIiwiaXNQYXNzd29yZENvcnJlY3QiLCJjb21wYXJlIiwidG9rZW4iLCJqd3QiLCJzaWduIiwiaWQiLCJjcmVhdGVkQXQiLCJEYXRlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJkYXRhIiwibG9nb3V0IiwiaGVhZGVycyIsImdldEN1cnJlbnRVc2VyIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9zdHVubmEvRG9jdW1lbnRzL2Rldi93YXRlci1sZXZlbC1hbmQtcXVhbGl0eS1zZW5zb3Ivd2F0ZXJfc2VydmVyL3NyYy9jb250cm9sbGVycy9hdXRoLyIsInNvdXJjZXMiOlsiYXV0aC5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vLi4vdXRpbHMvbG9nZ2VyJztcbmltcG9ydCBVc2VyIGZyb20gJy4uLy4uL2RiL21vZGVscyc7XG5pbXBvcnQgUGFzc3dvcmQgZnJvbSAnLi4vLi4vc2VydmljZXMvcGFzc3dvcmQnO1xuaW1wb3J0IHsgZXJyb3JSZXNwb25zZSwgc3VjY2Vzc1Jlc3BvbnNlIH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ1JlZ2lzdGVyaW5nIHVzZXInKTtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIC8vIENoZWNrIGlmIHBhc3N3b3JkcyBtYXRjaFxuICAgIGlmIChwYXNzd29yZCAhPT0gY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bhc3N3b3JkcyBkbyBub3QgbWF0Y2gnKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XG5cbiAgICBpZiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgfVxuXG4gICAgLy8gSGFzaCBwYXNzd29yZFxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgUGFzc3dvcmQudG9IYXNoKHBhc3N3b3JkKTtcblxuICAgIC8vIENyZWF0ZSB1c2VyXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IFVzZXIuY3JlYXRlKHsgZW1haWwsIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcicpO1xuICAgIH1cblxuICAgIHJldHVybiBzdWNjZXNzUmVzcG9uc2UocmVxLCByZXMsICdVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgMjAxKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiBlcnJvclJlc3BvbnNlKHJlcSwgcmVzLCBlcnJvci5tZXNzYWdlLCAnRmFpbGVkJywgNTAwKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGxvZ2luID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGxvZ2dlci5pbmZvKCdMb2dnaW5nIGluIHVzZXInKTtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0c1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgZG9lcyBub3QgZXhpc3QnKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBwYXNzd29yZCBpcyBjb3JyZWN0XG4gICAgY29uc3QgaXNQYXNzd29yZENvcnJlY3QgPSBhd2FpdCBQYXNzd29yZC5jb21wYXJlKHVzZXIucGFzc3dvcmQsIHBhc3N3b3JkKTtcblxuICAgIGlmICghaXNQYXNzd29yZENvcnJlY3QpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW5jb3JyZWN0IHBhc3N3b3JkJyk7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgdG9rZW5cbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgaWQ6IHVzZXIuaWQsIGVtYWlsOiB1c2VyLmVtYWlsLCBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICczMGQnIH0pO1xuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHRva2VuLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICByZXR1cm4gc3VjY2Vzc1Jlc3BvbnNlKHJlcSwgcmVzLCBkYXRhLCAyMDApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgcmV0dXJuIGVycm9yUmVzcG9uc2UocmVxLCByZXMsIGVycm9yLm1lc3NhZ2UsIDQwMCk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBsb2dvdXQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ0xvZ2dpbmcgb3V0IHVzZXInKTtcbiAgdHJ5IHtcbiAgICByZXEuaGVhZGVyc1sneC10b2tlbiddID0gbnVsbDtcbiAgICByZXEuaGVhZGVycyA9IHt9O1xuICAgIHJldHVybiBzdWNjZXNzUmVzcG9uc2UocmVxLCByZXMsICdVc2VyIGxvZ2dlZCBvdXQgc3VjY2Vzc2Z1bGx5JywgbnVsbCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICByZXR1cm4gZXJyb3JSZXNwb25zZShyZXEsIHJlcywgZXJyb3IubWVzc2FnZSwgNDAwKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRVc2VyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGxvZ2dlci5pbmZvKCdHZXR0aW5nIGN1cnJlbnQgdXNlcicpO1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogcmVxLnVzZXIuaWQgfSB9KTtcbiAgICByZXR1cm4gc3VjY2Vzc1Jlc3BvbnNlKHJlcSwgcmVzLCB1c2VyLCAyMDApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgcmV0dXJuIGVycm9yUmVzcG9uc2UocmVxLCByZXMsIGVycm9yLm1lc3NhZ2UsIDQwMCk7XG4gIH1cbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRU8sTUFBTUEsUUFBUSxHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzFDQyxlQUFNLENBQUNDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztFQUMvQixJQUFJO0lBQ0YsTUFBTTtNQUFFQyxLQUFLO01BQUVDLFFBQVE7TUFBRUM7SUFBZ0IsQ0FBQyxHQUFHTixHQUFHLENBQUNPLElBQUk7O0lBRXJEO0lBQ0EsSUFBSUYsUUFB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","map":{"version":3,"names":["register","req","res","logger","info","email","password","confirmPassword","body","Error","user","User","findOne","where","hashedPassword","Password","toHash","create","error","successResponse","errorResponse","message","login","isPasswordCorrect","compare","token","jwt","sign","id","createdAt","Date","process","env","JWT_SECRET","expiresIn","data","logout","headers","getCurrentUser"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/","sources":["auth.controller.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\nimport logger from '../../utils/logger';\nimport User from '../../db/models';\nimport Password from '../../services/password';\nimport { errorResponse, successResponse } from '../../utils';\n\nexport const register = async (req, res) => {\n  logger.info('Registering user');\n  try {\n    const { email, password, confirmPassword } = req.body;\n\n    // Check if passwords match\n    if (password !== confirmPassword) {\n      throw new Error('Passwords do not match');\n    }\n\n    // Check if user already exists\n    const user = await User.findOne({ where: { email } });\n\n    if (user) {\n      throw new Error('User already exists');\n    }\n\n    // Hash password\n    const hashedPassword = await Password.toHash(password);\n\n    // Create user\n    try {\n      await User.create({ email, password: hashedPassword });\n    } catch (error) {\n      logger.error(error);\n      throw new Error('Error creating user');\n    }\n\n    return successResponse(req, res, 'User created successfully', 201);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 'Failed', 500);\n  }\n};\n\nexport const login = async (req, res) => {\n  logger.info('Logging in user');\n  try {\n    const { email, password } = req.body;\n\n    // Check if user exists\n    const user = await User.findOne({ where: { email } });\n\n    if (!user) {\n      throw new Error('User does not exist');\n    }\n\n    // Check if password is correct\n    const isPasswordCorrect = await Password.compare(user.password, password);\n\n    if (!isPasswordCorrect) {\n      throw new Error('Incorrect password');\n    }\n\n    // Generate token\n    const token = jwt.sign({ id: user.id, email: user.email, createdAt: new Date() }, process.env.JWT_SECRET, { expiresIn: '30d' });\n\n    const data = {\n      token,\n      user: {\n        id: user.id,\n        email: user.email,\n      },\n    };\n\n    return successResponse(req, res, data, 200);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 400);\n  }\n};\n\nexport const logout = async (req, res) => {\n  logger.info('Logging out user');\n  try {\n    req.headers['x-token'] = null;\n    req.headers = {};\n    return successResponse(req, res, 'User logged out successfully', null);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 400);\n  }\n};\n\nexport const getCurrentUser = async (req, res) => {\n  logger.info('Getting current user');\n  try {\n    const user = await User.findOne({ where: { id: req.user.id } });\n    return successResponse(req, res, user, 200);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 400);\n  }\n};\n"],"mappings":"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"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/db/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/db/models/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _sequelize = require(\"sequelize\");\nvar _config = _interopRequireDefault(require(\"../../config/config\"));\nconst path = require('path');\nconst fs = require('fs');\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst db = {};\nlet sequelize;\nif (_config.default[env]) {\n  console.log('config[env]::', _config.default[env]);\n  sequelize = new _sequelize.Sequelize(_config.default[env]);\n} else {\n  sequelize = new _sequelize.Sequelize(_config.default.development.database, _config.default.development.username, _config.default.development.password);\n}\nfs.readdirSync(__dirname).filter(file => file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js').forEach(file => {\n  console.log('file::', file);\n  const dir = `${__dirname}/${file}`;\n  // eslint-disable-next-line import/no-dynamic-require, global-require\n  const model = require(`${dir}`).default(sequelize, _sequelize.Sequelize.DataTypes);\n  db[model.name] = model;\n});\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\ndb.sequelize = sequelize;\ndb.Sequelize = _sequelize.Sequelize;\nmodule.exports = db;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXRoIiwicmVxdWlyZSIsImZzIiwiYmFzZW5hbWUiLCJfX2ZpbGVuYW1lIiwiZW52IiwicHJvY2VzcyIsIk5PREVfRU5WIiwiZGIiLCJzZXF1ZWxpemUiLCJjb25maWciLCJjb25zb2xlIiwibG9nIiwiU2VxdWVsaXplIiwiZGV2ZWxvcG1lbnQiLCJkYXRhYmFzZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJyZWFkZGlyU3luYyIsIl9fZGlybmFtZSIsImZpbHRlciIsImZpbGUiLCJpbmRleE9mIiwic2xpY2UiLCJmb3JFYWNoIiwiZGlyIiwibW9kZWwiLCJkZWZhdWx0IiwiRGF0YVR5cGVzIiwibmFtZSIsIk9iamVjdCIsImtleXMiLCJtb2RlbE5hbWUiLCJhc3NvY2lhdGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9zdHVubmEvRG9jdW1lbnRzL2Rldi93YXRlci1sZXZlbC1hbmQtcXVhbGl0eS1zZW5zb3Ivd2F0ZXJfc2VydmVyL3NyYy9kYi9tb2RlbHMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXF1ZWxpemUgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi8uLi9jb25maWcvY29uZmlnJztcblxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcblxuY29uc3QgYmFzZW5hbWUgPSBwYXRoLmJhc2VuYW1lKF9fZmlsZW5hbWUpO1xuY29uc3QgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50JztcblxuY29uc3QgZGIgPSB7fTtcblxubGV0IHNlcXVlbGl6ZTtcblxuaWYgKGNvbmZpZ1tlbnZdKSB7XG4gIGNvbnNvbGUubG9nKCdjb25maWdbZW52XTo6JywgY29uZmlnW2Vudl0pO1xuICBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKGNvbmZpZ1tlbnZdKTtcbn0gZWxzZSB7XG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoXG4gICAgY29uZmlnLmRldmVsb3BtZW50LmRhdGFiYXNlLFxuICAgIGNvbmZpZy5kZXZlbG9wbWVudC51c2VybmFtZSxcbiAgICBjb25maWcuZGV2ZWxvcG1lbnQucGFzc3dvcmQsXG5cbiAgKTtcbn1cblxuZnNcbiAgLnJlYWRkaXJTeW5jKF9fZGlybmFtZSlcbiAgLmZpbHRlcigoZmlsZSkgPT4gKGZpbGUuaW5kZXhPZignLicpICE9PSAwKSAmJiAoZmlsZSAhPT0gYmFzZW5hbWUpICYmIChmaWxlLnNsaWNlKC0zKSA9PT0gJy5qcycpKVxuICAuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdmaWxlOjonLCBmaWxlKTtcbiAgICBjb25zdCBkaXIgPSBgJHtfX2Rpcm5hbWV9LyR7ZmlsZX1gO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZHluYW1pYy1yZXF1aXJlLCBnbG9iYWwtcmVxdWlyZVxuICAgIGNvbnN0IG1vZGVsID0gcmVxdWlyZShgJHtkaXJ9YCkuZGVmYXVsdChzZXF1ZWxpemUsIFNlcXVlbGl6ZS5EYXRhVHlwZXMpO1xuICAgIGRiW21vZGVsLm5hbWVdID0gbW9kZWw7XG4gIH0pO1xuXG5PYmplY3Qua2V5cyhkYikuZm9yRWFjaCgobW9kZWxOYW1lKSA9PiB7XG4gIGlmIChkYlttb2RlbE5hbWVdLmFzc29jaWF0ZSkge1xuICAgIGRiW21vZGVsTmFtZV0uYXNzb2NpYXRlKGRiKTtcbiAgfVxufSk7XG5cbmRiLnNlcXVlbGl6ZSA9IHNlcXVlbGl6ZTtcbmRiLlNlcXVlbGl6ZSA9IFNlcXVlbGl6ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBkYjtcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUVBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNQyxFQUFFLEdBQUdELE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFFeEIsTUFBTUUsUUFBUSxHQUFHSCxJQUFJLENBQUNHLFFBQVEsQ0FBQ0MsVUFBVSxDQUFDO0FBQzFDLE1BQU1DLEdBQUcsR0FBR0MsT0FBTyxDQUFDRCxHQUFHLENBQUNFLFFBQVEsSUFBSSxhQUFhO0FBRWpELE1BQU1DLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFFYixJQUFJQyxTQUFTO0FBRWIsSUFBSUMsZUFBTSxDQUFDTCxHQUFHLENBQUMsRUFBRTtFQUNmTSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxlQUFlLEVBQUVGLGVBQU0sQ0FBQ0wsR0FBRyxDQUFDLENBQUM7RUFDekNJLFNBQVMsR0FBRyxJQUFJSSxvQkFBUyxDQUFDSCxlQUFNLENBQUNMLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLENBQUMsTUFBTTtFQUNMSSxTQUFTLEdBQUcsSUFBSUksb0JBQVMsQ0FDdkJILGVBQU0sQ0FBQ0ksV0FBVyxDQUFDQyxRQUFRLEVBQzNCTCxlQUFNLENBQUNJLFdBQVcsQ0FBQ0UsUUFBUSxFQUMzQk4sZUFBTSxDQUFDSSxXQUFXLENBQUNHLFFBQVEsQ0FFNUI7QUFDSDtBQUVBZixFQUFFLENBQ0NnQixXQUFXLENBQUNDLFNBQVMsQ0FBQyxDQUN0QkMsTUFBTSxDQUFFQyxJQUFJLElBQU1BLElBQUksQ0FBQ0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBTUQsSUFBSSxLQUFLbEIsUUFBUyxJQUFLa0IsSUFBSSxDQUFDRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFNLENBQUMsQ0FDaEdDLE9BQU8sQ0FBRUgsSUFBSSxJQUFLO0VBQ2pCVixPQUFPLENBQUNDLEdBQUcsQ0FBQyxRQUFRLEVBQUVTLElBQUksQ0FBQztFQUMzQixNQUFNSSxHQUFHLEdBQUksR0FBRU4sU0FBVSxJQUFHRSxJQUFLLEVBQUM7RUFDbEM7RUFDQSxNQUFNSyxLQUFLLEdBQUd6QixPQUFPLENBQUUsR0FBRXdCLEdBQUksRUFBQyxDQUFDLENBQUNFLE9BQU8sQ0FBQ2xCLFNBQVMsRUFBRUksb0JBQVMsQ0FBQ2UsU0FBUyxDQUFDO0VBQ3ZFcEIsRUFBRSxDQUFDa0IsS0FBSyxDQUFDRyxJQUFJLENBQUMsR0FBR0gsS0FBSztBQUN4QixDQUFDLENBQUM7QUFFSkksTUFBTSxDQUFDQyxJQUFJLENBQUN2QixFQUFFLENBQUMsQ0FBQ2dCLE9BQU8sQ0FBRVEsU0FBUyxJQUFLO0VBQ3JDLElBQUl4QixFQUFFLENBQUN3QixTQUFTLENBQUMsQ0FBQ0MsU0FBUyxFQUFFO0lBQzNCekIsRUFBRSxDQUFDd0IsU0FBUyxDQUFDLENBQUNDLFNBQVMsQ0FBQ3pCLEVBQUUsQ0FBQztFQUM3QjtBQUNGLENBQUMsQ0FBQztBQUVGQSxFQUFFLENBQUNDLFNBQVMsR0FBR0EsU0FBUztBQUN4QkQsRUFBRSxDQUFDSyxTQUFTLEdBQUdBLG9CQUFTO0FBRXhCcUIsTUFBTSxDQUFDQyxPQUFPLEdBQUczQixFQUFFIn0=","map":{"version":3,"names":["path","require","fs","basename","__filename","env","process","NODE_ENV","db","sequelize","config","console","log","Sequelize","development","database","username","password","readdirSync","__dirname","filter","file","indexOf","slice","forEach","dir","model","default","DataTypes","name","Object","keys","modelName","associate","module","exports"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/db/models/","sources":["index.js"],"sourcesContent":["import { Sequelize } from 'sequelize';\nimport config from '../../config/config';\n\nconst path = require('path');\nconst fs = require('fs');\n\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\n\nconst db = {};\n\nlet sequelize;\n\nif (config[env]) {\n  console.log('config[env]::', config[env]);\n  sequelize = new Sequelize(config[env]);\n} else {\n  sequelize = new Sequelize(\n    config.development.database,\n    config.development.username,\n    config.development.password,\n\n  );\n}\n\nfs\n  .readdirSync(__dirname)\n  .filter((file) => (file.indexOf('.') !== 0) && (file !== basename) && (file.slice(-3) === '.js'))\n  .forEach((file) => {\n    console.log('file::', file);\n    const dir = `${__dirname}/${file}`;\n    // eslint-disable-next-line import/no-dynamic-require, global-require\n    const model = require(`${dir}`).default(sequelize, Sequelize.DataTypes);\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach((modelName) => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nmodule.exports = db;\n"],"mappings":";;;AAAA;AACA;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMC,EAAE,GAAGD,OAAO,CAAC,IAAI,CAAC;AAExB,MAAME,QAAQ,GAAGH,IAAI,CAACG,QAAQ,CAACC,UAAU,CAAC;AAC1C,MAAMC,GAAG,GAAGC,OAAO,CAACD,GAAG,CAACE,QAAQ,IAAI,aAAa;AAEjD,MAAMC,EAAE,GAAG,CAAC,CAAC;AAEb,IAAIC,SAAS;AAEb,IAAIC,eAAM,CAACL,GAAG,CAAC,EAAE;EACfM,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,eAAM,CAACL,GAAG,CAAC,CAAC;EACzCI,SAAS,GAAG,IAAII,oBAAS,CAACH,eAAM,CAACL,GAAG,CAAC,CAAC;AACxC,CAAC,MAAM;EACLI,SAAS,GAAG,IAAII,oBAAS,CACvBH,eAAM,CAACI,WAAW,CAACC,QAAQ,EAC3BL,eAAM,CAACI,WAAW,CAACE,QAAQ,EAC3BN,eAAM,CAACI,WAAW,CAACG,QAAQ,CAE5B;AACH;AAEAf,EAAE,CACCgB,WAAW,CAACC,SAAS,CAAC,CACtBC,MAAM,CAAEC,IAAI,IAAMA,IAAI,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAMD,IAAI,KAAKlB,QAAS,IAAKkB,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAM,CAAC,CAChGC,OAAO,CAAEH,IAAI,IAAK;EACjBV,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAES,IAAI,CAAC;EAC3B,MAAMI,GAAG,GAAI,GAAEN,SAAU,IAAGE,IAAK,EAAC;EAClC;EACA,MAAMK,KAAK,GAAGzB,OAAO,CAAE,GAAEwB,GAAI,EAAC,CAAC,CAACE,OAAO,CAAClB,SAAS,EAAEI,oBAAS,CAACe,SAAS,CAAC;EACvEpB,EAAE,CAACkB,KAAK,CAACG,IAAI,CAAC,GAAGH,KAAK;AACxB,CAAC,CAAC;AAEJI,MAAM,CAACC,IAAI,CAACvB,EAAE,CAAC,CAACgB,OAAO,CAAEQ,SAAS,IAAK;EACrC,IAAIxB,EAAE,CAACwB,SAAS,CAAC,CAACC,SAAS,EAAE;IAC3BzB,EAAE,CAACwB,SAAS,CAAC,CAACC,SAAS,CAACzB,EAAE,CAAC;EAC7B;AACF,CAAC,CAAC;AAEFA,EAAE,CAACC,SAAS,GAAGA,SAAS;AACxBD,EAAE,CAACK,SAAS,GAAGA,oBAAS;AAExBqB,MAAM,CAACC,OAAO,GAAG3B,EAAE"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/config/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar dotenv = _interopRequireWildcard(require(\"dotenv\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\ndotenv.config();\nconst config = {\n  development: {\n    username: process.env.DB_USER,\n    password: process.env.DB_PASS,\n    database: process.env.DB_NAME,\n    host: process.env.DB_HOST,\n    dialect: 'postgres',\n    port: parseInt(process.env.DB_PORT, 10)\n  }\n};\nmodule.exports = config;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJkZXZlbG9wbWVudCIsInVzZXJuYW1lIiwicHJvY2VzcyIsImVudiIsIkRCX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1MiLCJkYXRhYmFzZSIsIkRCX05BTUUiLCJob3N0IiwiREJfSE9TVCIsImRpYWxlY3QiLCJwb3J0IiwicGFyc2VJbnQiLCJEQl9QT1JUIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRvdGVudiBmcm9tICdkb3RlbnYnO1xuXG5kb3RlbnYuY29uZmlnKCk7XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgZGV2ZWxvcG1lbnQ6IHtcbiAgICB1c2VybmFtZTogcHJvY2Vzcy5lbnYuREJfVVNFUixcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTUyxcbiAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSxcbiAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULFxuICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCwgMTApLFxuICB9LFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb25maWc7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFBaUM7QUFBQTtBQUVqQ0EsTUFBTSxDQUFDQyxNQUFNLEVBQUU7QUFFZixNQUFNQSxNQUFNLEdBQUc7RUFDYkMsV0FBVyxFQUFFO0lBQ1hDLFFBQVEsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87SUFDN0JDLFFBQVEsRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87SUFDN0JDLFFBQVEsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLE9BQU87SUFDN0JDLElBQUksRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLE9BQU87SUFDekJDLE9BQU8sRUFBRSxVQUFVO0lBQ25CQyxJQUFJLEVBQUVDLFFBQVEsQ0FBQ1gsT0FBTyxDQUFDQyxHQUFHLENBQUNXLE9BQU8sRUFBRSxFQUFFO0VBQ3hDO0FBQ0YsQ0FBQztBQUVEQyxNQUFNLENBQUNDLE9BQU8sR0FBR2pCLE1BQU0ifQ==","map":{"version":3,"names":["dotenv","config","development","username","process","env","DB_USER","password","DB_PASS","database","DB_NAME","host","DB_HOST","dialect","port","parseInt","DB_PORT","module","exports"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/config/","sources":["config.js"],"sourcesContent":["import * as dotenv from 'dotenv';\n\ndotenv.config();\n\nconst config = {\n  development: {\n    username: process.env.DB_USER,\n    password: process.env.DB_PASS,\n    database: process.env.DB_NAME,\n    host: process.env.DB_HOST,\n    dialect: 'postgres',\n    port: parseInt(process.env.DB_PORT, 10),\n  },\n};\n\nmodule.exports = config;\n"],"mappings":";;AAAA;AAAiC;AAAA;AAEjCA,MAAM,CAACC,MAAM,EAAE;AAEf,MAAMA,MAAM,GAAG;EACbC,WAAW,EAAE;IACXC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;IAC7BC,QAAQ,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;IAC7BC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,OAAO;IAC7BC,IAAI,EAAEP,OAAO,CAACC,GAAG,CAACO,OAAO;IACzBC,OAAO,EAAE,UAAU;IACnBC,IAAI,EAAEC,QAAQ,CAACX,OAAO,CAACC,GAAG,CAACW,OAAO,EAAE,EAAE;EACxC;AACF,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGjB,MAAM"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/db/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/db/models/stats.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _default = (sequelize, DataTypes) => {\n  class Stats extends _sequelize.Model {\n    static associate(models) {\n      // define association here\n      Stats.belongsTo(models.User, {\n        foreignKey: 'userId',\n        onDelete: 'CASCADE',\n        as: 'user'\n      });\n    }\n  }\n  Stats.init({\n    id: {\n      type: DataTypes.INTEGER,\n      primaryKey: true,\n      autoIncrement: true\n    },\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n      references: {\n        model: 'Users',\n        key: 'id'\n      }\n    },\n    temperature: {\n      type: DataTypes.FLOAT,\n      allowNull: false\n    },\n    ph: DataTypes.FLOAT,\n    turb: DataTypes.FLOAT,\n    createdAt: {\n      type: DataTypes.DATE,\n      allowNull: false,\n      defaultValue: DataTypes.NOW\n    },\n    updatedAt: {\n      type: DataTypes.DATE,\n      allowNull: false,\n      defaultValue: DataTypes.NOW\n    }\n  }, {\n    sequelize,\n    modelName: 'Stats',\n    tableName: 'stats'\n  });\n  return Stats;\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXF1ZWxpemUiLCJEYXRhVHlwZXMiLCJTdGF0cyIsIk1vZGVsIiwiYXNzb2NpYXRlIiwibW9kZWxzIiwiYmVsb25nc1RvIiwiVXNlciIsImZvcmVpZ25LZXkiLCJvbkRlbGV0ZSIsImFzIiwiaW5pdCIsImlkIiwidHlwZSIsIklOVEVHRVIiLCJwcmltYXJ5S2V5IiwiYXV0b0luY3JlbWVudCIsInVzZXJJZCIsIlVVSUQiLCJhbGxvd051bGwiLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJrZXkiLCJ0ZW1wZXJhdHVyZSIsIkZMT0FUIiwicGgiLCJ0dXJiIiwiY3JlYXRlZEF0IiwiREFURSIsImRlZmF1bHRWYWx1ZSIsIk5PVyIsInVwZGF0ZWRBdCIsIm1vZGVsTmFtZSIsInRhYmxlTmFtZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci9zcmMvZGIvbW9kZWxzLyIsInNvdXJjZXMiOlsic3RhdHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgTW9kZWwsXG59IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICBjbGFzcyBTdGF0cyBleHRlbmRzIE1vZGVsIHtcbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xuICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcbiAgICAgIFN0YXRzLmJlbG9uZ3NUbyhtb2RlbHMuVXNlciwge1xuICAgICAgICBmb3JlaWduS2V5OiAndXNlcklkJyxcbiAgICAgICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICAgICAgYXM6ICd1c2VyJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBTdGF0cy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICB9LFxuICAgIHVzZXJJZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICBtb2RlbDogJ1VzZXJzJyxcbiAgICAgICAga2V5OiAnaWQnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRlbXBlcmF0dXJlOiB7IHR5cGU6IERhdGFUeXBlcy5GTE9BVCwgYWxsb3dOdWxsOiBmYWxzZSB9LFxuICAgIHBoOiBEYXRhVHlwZXMuRkxPQVQsXG4gICAgdHVyYjogRGF0YVR5cGVzLkZMT0FULFxuICAgIGNyZWF0ZWRBdDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuXG4gICAgfSxcbiAgICB1cGRhdGVkQXQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ1N0YXRzJyxcbiAgICB0YWJsZU5hbWU6ICdzdGF0cycsXG4gIH0pO1xuICByZXR1cm4gU3RhdHM7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUVtQixlQUVKLENBQUNBLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDLE1BQU1DLEtBQUssU0FBU0MsZ0JBQUssQ0FBQztJQUN4QixPQUFPQyxTQUFTLENBQUNDLE1BQU0sRUFBRTtNQUN2QjtNQUNBSCxLQUFLLENBQUNJLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDRSxJQUFJLEVBQUU7UUFDM0JDLFVBQVUsRUFBRSxRQUFRO1FBQ3BCQyxRQUFRLEVBQUUsU0FBUztRQUNuQkMsRUFBRSxFQUFFO01BQ04sQ0FBQyxDQUFDO0lBQ0o7RUFDRjtFQUNBUixLQUFLLENBQUNTLElBQUksQ0FBQztJQUNUQyxFQUFFLEVBQUU7TUFDRkMsSUFBSSxFQUFFWixTQUFTLENBQUNhLE9BQU87TUFDdkJDLFVBQVUsRUFBRSxJQUFJO01BQ2hCQyxhQUFhLEVBQUU7SUFDakIsQ0FBQztJQUNEQyxNQUFNLEVBQUU7TUFDTkosSUFBSSxFQUFFWixTQUFTLENBQUNpQixJQUFJO01BQ3BCQyxTQUFTLEVBQUUsS0FBSztNQUNoQkMsVUFBVSxFQUFFO1FBQ1ZDLEtBQUssRUFBRSxPQUFPO1FBQ2RDLEdBQUcsRUFBRTtNQUNQO0lBQ0YsQ0FBQztJQUNEQyxXQUFXLEVBQUU7TUFBRVYsSUFBSSxFQUFFWixTQUFTLENBQUN1QixLQUFLO01BQUVMLFNBQVMsRUFBRTtJQUFNLENBQUM7SUFDeERNLEVBQUUsRUFBRXhCLFNBQVMsQ0FBQ3VCLEtBQUs7SUFDbkJFLElBQUksRUFBRXpCLFNBQVMsQ0FBQ3VCLEtBQUs7SUFDckJHLFNBQVMsRUFBRTtNQUNUZCxJQUFJLEVBQUVaLFNBQVMsQ0FBQzJCLElBQUk7TUFDcEJULFNBQVMsRUFBRSxLQUFLO01BQ2hCVSxZQUFZLEVBQUU1QixTQUFTLENBQUM2QjtJQUUxQixDQUFDO0lBQ0RDLFNBQVMsRUFBRTtNQUNUbEIsSUFBSSxFQUFFWixTQUFTLENBQUMyQixJQUFJO01BQ3BCVCxTQUFTLEVBQUUsS0FBSztNQUNoQlUsWUFBWSxFQUFFNUIsU0FBUyxDQUFDNkI7SUFDMUI7RUFDRixDQUFDLEVBQUU7SUFDRDlCLFNBQVM7SUFDVGdDLFNBQVMsRUFBRSxPQUFPO0lBQ2xCQyxTQUFTLEVBQUU7RUFDYixDQUFDLENBQUM7RUFDRixPQUFPL0IsS0FBSztBQUNkLENBQUM7QUFBQSJ9","map":{"version":3,"names":["sequelize","DataTypes","Stats","Model","associate","models","belongsTo","User","foreignKey","onDelete","as","init","id","type","INTEGER","primaryKey","autoIncrement","userId","UUID","allowNull","references","model","key","temperature","FLOAT","ph","turb","createdAt","DATE","defaultValue","NOW","updatedAt","modelName","tableName"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/db/models/","sources":["stats.js"],"sourcesContent":["import {\n  Model,\n} from 'sequelize';\n\nexport default (sequelize, DataTypes) => {\n  class Stats extends Model {\n    static associate(models) {\n      // define association here\n      Stats.belongsTo(models.User, {\n        foreignKey: 'userId',\n        onDelete: 'CASCADE',\n        as: 'user',\n      });\n    }\n  }\n  Stats.init({\n    id: {\n      type: DataTypes.INTEGER,\n      primaryKey: true,\n      autoIncrement: true,\n    },\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n      references: {\n        model: 'Users',\n        key: 'id',\n      },\n    },\n    temperature: { type: DataTypes.FLOAT, allowNull: false },\n    ph: DataTypes.FLOAT,\n    turb: DataTypes.FLOAT,\n    createdAt: {\n      type: DataTypes.DATE,\n      allowNull: false,\n      defaultValue: DataTypes.NOW,\n\n    },\n    updatedAt: {\n      type: DataTypes.DATE,\n      allowNull: false,\n      defaultValue: DataTypes.NOW,\n    },\n  }, {\n    sequelize,\n    modelName: 'Stats',\n    tableName: 'stats',\n  });\n  return Stats;\n};\n"],"mappings":";;;;;;AAAA;AAEmB,eAEJ,CAACA,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,KAAK,SAASC,gBAAK,CAAC;IACxB,OAAOC,SAAS,CAACC,MAAM,EAAE;MACvB;MACAH,KAAK,CAACI,SAAS,CAACD,MAAM,CAACE,IAAI,EAAE;QAC3BC,UAAU,EAAE,QAAQ;QACpBC,QAAQ,EAAE,SAAS;QACnBC,EAAE,EAAE;MACN,CAAC,CAAC;IACJ;EACF;EACAR,KAAK,CAACS,IAAI,CAAC;IACTC,EAAE,EAAE;MACFC,IAAI,EAAEZ,SAAS,CAACa,OAAO;MACvBC,UAAU,EAAE,IAAI;MAChBC,aAAa,EAAE;IACjB,CAAC;IACDC,MAAM,EAAE;MACNJ,IAAI,EAAEZ,SAAS,CAACiB,IAAI;MACpBC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QACdC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,WAAW,EAAE;MAAEV,IAAI,EAAEZ,SAAS,CAACuB,KAAK;MAAEL,SAAS,EAAE;IAAM,CAAC;IACxDM,EAAE,EAAExB,SAAS,CAACuB,KAAK;IACnBE,IAAI,EAAEzB,SAAS,CAACuB,KAAK;IACrBG,SAAS,EAAE;MACTd,IAAI,EAAEZ,SAAS,CAAC2B,IAAI;MACpBT,SAAS,EAAE,KAAK;MAChBU,YAAY,EAAE5B,SAAS,CAAC6B;IAE1B,CAAC;IACDC,SAAS,EAAE;MACTlB,IAAI,EAAEZ,SAAS,CAAC2B,IAAI;MACpBT,SAAS,EAAE,KAAK;MAChBU,YAAY,EAAE5B,SAAS,CAAC6B;IAC1B;EACF,CAAC,EAAE;IACD9B,SAAS;IACTgC,SAAS,EAAE,OAAO;IAClBC,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAO/B,KAAK;AACd,CAAC;AAAA"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/db/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/db/models/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _default = (sequelize, DataTypes) => {\n  const User = sequelize.define('User', {\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: _sequelize.UUIDV4,\n      primaryKey: true\n    },\n    email: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      unique: true\n    },\n    password: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    createdAt: {\n      type: DataTypes.DATE,\n      allowNull: false,\n      defaultValue: _sequelize.NOW\n    },\n    updatedAt: {\n      type: DataTypes.DATE,\n      allowNull: false,\n      defaultValue: _sequelize.NOW\n    }\n  }, {\n    sequelize,\n    modelName: 'User',\n    tableName: 'users'\n  });\n  return User;\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXF1ZWxpemUiLCJEYXRhVHlwZXMiLCJVc2VyIiwiZGVmaW5lIiwiaWQiLCJ0eXBlIiwiVVVJRCIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsInByaW1hcnlLZXkiLCJlbWFpbCIsIlNUUklORyIsImFsbG93TnVsbCIsInVuaXF1ZSIsInBhc3N3b3JkIiwiY3JlYXRlZEF0IiwiREFURSIsIk5PVyIsInVwZGF0ZWRBdCIsIm1vZGVsTmFtZSIsInRhYmxlTmFtZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci9zcmMvZGIvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVVUlEVjQsIE5PVyB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICBjb25zdCBVc2VyID0gc2VxdWVsaXplLmRlZmluZSgnVXNlcicsIHtcbiAgICBpZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICBkZWZhdWx0VmFsdWU6IFVVSURWNCxcbiAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgfSxcblxuICAgIGVtYWlsOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICB9LFxuICAgIHBhc3N3b3JkOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGNyZWF0ZWRBdDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiBOT1csXG4gICAgfSxcbiAgICB1cGRhdGVkQXQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIGRlZmF1bHRWYWx1ZTogTk9XLFxuICAgIH0sXG5cbiAgfSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdVc2VyJyxcbiAgICB0YWJsZU5hbWU6ICd1c2VycycsXG4gIH0pO1xuXG4gIHJldHVybiBVc2VyO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBd0MsZUFFekIsQ0FBQ0EsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkMsTUFBTUMsSUFBSSxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FBQyxNQUFNLEVBQUU7SUFDcENDLEVBQUUsRUFBRTtNQUNGQyxJQUFJLEVBQUVKLFNBQVMsQ0FBQ0ssSUFBSTtNQUNwQkMsWUFBWSxFQUFFQyxpQkFBTTtNQUNwQkMsVUFBVSxFQUFFO0lBQ2QsQ0FBQztJQUVEQyxLQUFLLEVBQUU7TUFDTEwsSUFBSSxFQUFFSixTQUFTLENBQUNVLE1BQU07TUFDdEJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxNQUFNLEVBQUU7SUFDVixDQUFDO0lBQ0RDLFFBQVEsRUFBRTtNQUNSVCxJQUFJLEVBQUVKLFNBQVMsQ0FBQ1UsTUFBTTtNQUN0QkMsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUNERyxTQUFTLEVBQUU7TUFDVFYsSUFBSSxFQUFFSixTQUFTLENBQUNlLElBQUk7TUFDcEJKLFNBQVMsRUFBRSxLQUFLO01BQ2hCTCxZQUFZLEVBQUVVO0lBQ2hCLENBQUM7SUFDREMsU0FBUyxFQUFFO01BQ1RiLElBQUksRUFBRUosU0FBUyxDQUFDZSxJQUFJO01BQ3BCSixTQUFTLEVBQUUsS0FBSztNQUNoQkwsWUFBWSxFQUFFVTtJQUNoQjtFQUVGLENBQUMsRUFBRTtJQUNEakIsU0FBUztJQUNUbUIsU0FBUyxFQUFFLE1BQU07SUFDakJDLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FBQztFQUVGLE9BQU9sQixJQUFJO0FBQ2IsQ0FBQztBQUFBIn0=","map":{"version":3,"names":["sequelize","DataTypes","User","define","id","type","UUID","defaultValue","UUIDV4","primaryKey","email","STRING","allowNull","unique","password","createdAt","DATE","NOW","updatedAt","modelName","tableName"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/db/models/","sources":["user.js"],"sourcesContent":["import { UUIDV4, NOW } from 'sequelize';\n\nexport default (sequelize, DataTypes) => {\n  const User = sequelize.define('User', {\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: UUIDV4,\n      primaryKey: true,\n    },\n\n    email: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      unique: true,\n    },\n    password: {\n      type: DataTypes.STRING,\n      allowNull: false,\n    },\n    createdAt: {\n      type: DataTypes.DATE,\n      allowNull: false,\n      defaultValue: NOW,\n    },\n    updatedAt: {\n      type: DataTypes.DATE,\n      allowNull: false,\n      defaultValue: NOW,\n    },\n\n  }, {\n    sequelize,\n    modelName: 'User',\n    tableName: 'users',\n  });\n\n  return User;\n};\n"],"mappings":";;;;;;AAAA;AAAwC,eAEzB,CAACA,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,IAAI,GAAGF,SAAS,CAACG,MAAM,CAAC,MAAM,EAAE;IACpCC,EAAE,EAAE;MACFC,IAAI,EAAEJ,SAAS,CAACK,IAAI;MACpBC,YAAY,EAAEC,iBAAM;MACpBC,UAAU,EAAE;IACd,CAAC;IAEDC,KAAK,EAAE;MACLL,IAAI,EAAEJ,SAAS,CAACU,MAAM;MACtBC,SAAS,EAAE,KAAK;MAChBC,MAAM,EAAE;IACV,CAAC;IACDC,QAAQ,EAAE;MACRT,IAAI,EAAEJ,SAAS,CAACU,MAAM;MACtBC,SAAS,EAAE;IACb,CAAC;IACDG,SAAS,EAAE;MACTV,IAAI,EAAEJ,SAAS,CAACe,IAAI;MACpBJ,SAAS,EAAE,KAAK;MAChBL,YAAY,EAAEU;IAChB,CAAC;IACDC,SAAS,EAAE;MACTb,IAAI,EAAEJ,SAAS,CAACe,IAAI;MACpBJ,SAAS,EAAE,KAAK;MAChBL,YAAY,EAAEU;IAChB;EAEF,CAAC,EAAE;IACDjB,SAAS;IACTmB,SAAS,EAAE,MAAM;IACjBC,SAAS,EAAE;EACb,CAAC,CAAC;EAEF,OAAOlB,IAAI;AACb,CAAC;AAAA"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/services/password.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nclass Password {\n  static async toHash(password) {\n    const salt = await _bcrypt.default.genSalt(10);\n    return _bcrypt.default.hash(password, salt);\n  }\n  static async compare(storedPassword, suppliedPassword) {\n    return _bcrypt.default.compare(storedPassword, suppliedPassword);\n  }\n}\nvar _default = Password;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQYXNzd29yZCIsInRvSGFzaCIsInBhc3N3b3JkIiwic2FsdCIsImJjcnlwdCIsImdlblNhbHQiLCJoYXNoIiwiY29tcGFyZSIsInN0b3JlZFBhc3N3b3JkIiwic3VwcGxpZWRQYXNzd29yZCJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJwYXNzd29yZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5cbmNsYXNzIFBhc3N3b3JkIHtcbiAgc3RhdGljIGFzeW5jIHRvSGFzaChwYXNzd29yZCkge1xuICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgxMCk7XG4gICAgcmV0dXJuIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0KTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjb21wYXJlKHN0b3JlZFBhc3N3b3JkLCBzdXBwbGllZFBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHN0b3JlZFBhc3N3b3JkLCBzdXBwbGllZFBhc3N3b3JkKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYXNzd29yZDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBRUEsTUFBTUEsUUFBUSxDQUFDO0VBQ2IsYUFBYUMsTUFBTSxDQUFDQyxRQUFRLEVBQUU7SUFDNUIsTUFBTUMsSUFBSSxHQUFHLE1BQU1DLGVBQU0sQ0FBQ0MsT0FBTyxDQUFDLEVBQUUsQ0FBQztJQUNyQyxPQUFPRCxlQUFNLENBQUNFLElBQUksQ0FBQ0osUUFBUSxFQUFFQyxJQUFJLENBQUM7RUFDcEM7RUFFQSxhQUFhSSxPQUFPLENBQUNDLGNBQWMsRUFBRUMsZ0JBQWdCLEVBQUU7SUFDckQsT0FBT0wsZUFBTSxDQUFDRyxPQUFPLENBQUNDLGNBQWMsRUFBRUMsZ0JBQWdCLENBQUM7RUFDekQ7QUFDRjtBQUFDLGVBRWNULFFBQVE7QUFBQSJ9","map":{"version":3,"names":["Password","toHash","password","salt","bcrypt","genSalt","hash","compare","storedPassword","suppliedPassword"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/services/","sources":["password.js"],"sourcesContent":["import bcrypt from 'bcrypt';\n\nclass Password {\n  static async toHash(password) {\n    const salt = await bcrypt.genSalt(10);\n    return bcrypt.hash(password, salt);\n  }\n\n  static async compare(storedPassword, suppliedPassword) {\n    return bcrypt.compare(storedPassword, suppliedPassword);\n  }\n}\n\nexport default Password;\n"],"mappings":";;;;;;;AAAA;AAEA,MAAMA,QAAQ,CAAC;EACb,aAAaC,MAAM,CAACC,QAAQ,EAAE;IAC5B,MAAMC,IAAI,GAAG,MAAMC,eAAM,CAACC,OAAO,CAAC,EAAE,CAAC;IACrC,OAAOD,eAAM,CAACE,IAAI,CAACJ,QAAQ,EAAEC,IAAI,CAAC;EACpC;EAEA,aAAaI,OAAO,CAACC,cAAc,EAAEC,gBAAgB,EAAE;IACrD,OAAOL,eAAM,CAACG,OAAO,CAACC,cAAc,EAAEC,gBAAgB,CAAC;EACzD;AACF;AAAC,eAEcT,QAAQ;AAAA"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/utils/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateFields = exports.successResponse = exports.errorResponse = void 0;\nconst successResponse = (_req, res, data, code = 200) => {\n  res.status(code).send({\n    code,\n    data,\n    success: true\n  });\n};\nexports.successResponse = successResponse;\nconst errorResponse = (_req, res, error = {}, message = 'Something went wrong', code = 500) => {\n  res.status(code).json({\n    code,\n    message,\n    error,\n    success: false,\n    data: null\n  });\n};\nexports.errorResponse = errorResponse;\nconst validateFields = (object, fields) => {\n  const errors = {};\n  fields.forEach(field => {\n    if (!object[field]) {\n      errors[field] = `${field} is required`;\n    }\n  });\n  return errors.length ? `${errors.join(', ')} are required fields.` : null;\n};\nexports.validateFields = validateFields;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdWNjZXNzUmVzcG9uc2UiLCJfcmVxIiwicmVzIiwiZGF0YSIsImNvZGUiLCJzdGF0dXMiLCJzZW5kIiwic3VjY2VzcyIsImVycm9yUmVzcG9uc2UiLCJlcnJvciIsIm1lc3NhZ2UiLCJqc29uIiwidmFsaWRhdGVGaWVsZHMiLCJvYmplY3QiLCJmaWVsZHMiLCJlcnJvcnMiLCJmb3JFYWNoIiwiZmllbGQiLCJsZW5ndGgiLCJqb2luIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9zdHVubmEvRG9jdW1lbnRzL2Rldi93YXRlci1sZXZlbC1hbmQtcXVhbGl0eS1zZW5zb3Ivd2F0ZXJfc2VydmVyL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzdWNjZXNzUmVzcG9uc2UgPSAoX3JlcSwgcmVzLCBkYXRhLCBjb2RlID0gMjAwKSA9PiB7XG4gIHJlcy5zdGF0dXMoY29kZSkuc2VuZCh7XG4gICAgY29kZSxcbiAgICBkYXRhLFxuICAgIHN1Y2Nlc3M6IHRydWUsXG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGVycm9yUmVzcG9uc2UgPSAoXG4gIF9yZXEsXG4gIHJlcyxcbiAgZXJyb3IgPSB7fSxcbiAgbWVzc2FnZSA9ICdTb21ldGhpbmcgd2VudCB3cm9uZycsXG4gIGNvZGUgPSA1MDAsXG4pID0+IHtcbiAgcmVzLnN0YXR1cyhjb2RlKS5qc29uKHtcbiAgICBjb2RlLFxuICAgIG1lc3NhZ2UsXG4gICAgZXJyb3IsXG4gICAgc3VjY2VzczogZmFsc2UsXG4gICAgZGF0YTogbnVsbCxcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVGaWVsZHMgPSAob2JqZWN0LCBmaWVsZHMpID0+IHtcbiAgY29uc3QgZXJyb3JzID0ge307XG4gIGZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xuICAgIGlmICghb2JqZWN0W2ZpZWxkXSkge1xuICAgICAgZXJyb3JzW2ZpZWxkXSA9IGAke2ZpZWxkfSBpcyByZXF1aXJlZGA7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGVycm9ycy5sZW5ndGggPyBgJHtlcnJvcnMuam9pbignLCAnKX0gYXJlIHJlcXVpcmVkIGZpZWxkcy5gIDogbnVsbDtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLE1BQU1BLGVBQWUsR0FBRyxDQUFDQyxJQUFJLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxJQUFJLEdBQUcsR0FBRyxLQUFLO0VBQzlERixHQUFHLENBQUNHLE1BQU0sQ0FBQ0QsSUFBSSxDQUFDLENBQUNFLElBQUksQ0FBQztJQUNwQkYsSUFBSTtJQUNKRCxJQUFJO0lBQ0pJLE9BQU8sRUFBRTtFQUNYLENBQUMsQ0FBQztBQUNKLENBQUM7QUFBQztBQUVLLE1BQU1DLGFBQWEsR0FBRyxDQUMzQlAsSUFBSSxFQUNKQyxHQUFHLEVBQ0hPLEtBQUssR0FBRyxDQUFDLENBQUMsRUFDVkMsT0FBTyxHQUFHLHNCQUFzQixFQUNoQ04sSUFBSSxHQUFHLEdBQUcsS0FDUDtFQUNIRixHQUFHLENBQUNHLE1BQU0sQ0FBQ0QsSUFBSSxDQUFDLENBQUNPLElBQUksQ0FBQztJQUNwQlAsSUFBSTtJQUNKTSxPQUFPO0lBQ1BELEtBQUs7SUFDTEYsT0FBTyxFQUFFLEtBQUs7SUFDZEosSUFBSSxFQUFFO0VBQ1IsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUFDO0FBRUssTUFBTVMsY0FBYyxHQUFHLENBQUNDLE1BQU0sRUFBRUMsTUFBTSxLQUFLO0VBQ2hELE1BQU1DLE1BQU0sR0FBRyxDQUFDLENBQUM7RUFDakJELE1BQU0sQ0FBQ0UsT0FBTyxDQUFFQyxLQUFLLElBQUs7SUFDeEIsSUFBSSxDQUFDSixNQUFNLENBQUNJLEtBQUssQ0FBQyxFQUFFO01BQ2xCRixNQUFNLENBQUNFLEtBQUssQ0FBQyxHQUFJLEdBQUVBLEtBQU0sY0FBYTtJQUN4QztFQUNGLENBQUMsQ0FBQztFQUNGLE9BQU9GLE1BQU0sQ0FBQ0csTUFBTSxHQUFJLEdBQUVILE1BQU0sQ0FBQ0ksSUFBSSxDQUFDLElBQUksQ0FBRSx1QkFBc0IsR0FBRyxJQUFJO0FBQzNFLENBQUM7QUFBQyJ9","map":{"version":3,"names":["successResponse","_req","res","data","code","status","send","success","errorResponse","error","message","json","validateFields","object","fields","errors","forEach","field","length","join"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/utils/","sources":["index.js"],"sourcesContent":["export const successResponse = (_req, res, data, code = 200) => {\n  res.status(code).send({\n    code,\n    data,\n    success: true,\n  });\n};\n\nexport const errorResponse = (\n  _req,\n  res,\n  error = {},\n  message = 'Something went wrong',\n  code = 500,\n) => {\n  res.status(code).json({\n    code,\n    message,\n    error,\n    success: false,\n    data: null,\n  });\n};\n\nexport const validateFields = (object, fields) => {\n  const errors = {};\n  fields.forEach((field) => {\n    if (!object[field]) {\n      errors[field] = `${field} is required`;\n    }\n  });\n  return errors.length ? `${errors.join(', ')} are required fields.` : null;\n};\n"],"mappings":";;;;;;AAAO,MAAMA,eAAe,GAAG,CAACC,IAAI,EAAEC,GAAG,EAAEC,IAAI,EAAEC,IAAI,GAAG,GAAG,KAAK;EAC9DF,GAAG,CAACG,MAAM,CAACD,IAAI,CAAC,CAACE,IAAI,CAAC;IACpBF,IAAI;IACJD,IAAI;IACJI,OAAO,EAAE;EACX,CAAC,CAAC;AACJ,CAAC;AAAC;AAEK,MAAMC,aAAa,GAAG,CAC3BP,IAAI,EACJC,GAAG,EACHO,KAAK,GAAG,CAAC,CAAC,EACVC,OAAO,GAAG,sBAAsB,EAChCN,IAAI,GAAG,GAAG,KACP;EACHF,GAAG,CAACG,MAAM,CAACD,IAAI,CAAC,CAACO,IAAI,CAAC;IACpBP,IAAI;IACJM,OAAO;IACPD,KAAK;IACLF,OAAO,EAAE,KAAK;IACdJ,IAAI,EAAE;EACR,CAAC,CAAC;AACJ,CAAC;AAAC;AAEK,MAAMS,cAAc,GAAG,CAACC,MAAM,EAAEC,MAAM,KAAK;EAChD,MAAMC,MAAM,GAAG,CAAC,CAAC;EACjBD,MAAM,CAACE,OAAO,CAAEC,KAAK,IAAK;IACxB,IAAI,CAACJ,MAAM,CAACI,KAAK,CAAC,EAAE;MAClBF,MAAM,CAACE,KAAK,CAAC,GAAI,GAAEA,KAAM,cAAa;IACxC;EACF,CAAC,CAAC;EACF,OAAOF,MAAM,CAACG,MAAM,GAAI,GAAEH,MAAM,CAACI,IAAI,CAAC,IAAI,CAAE,uBAAsB,GAAG,IAAI;AAC3E,CAAC;AAAC"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/middlewares/requireAuth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _models = _interopRequireDefault(require(\"../db/models\"));\nvar _utils = require(\"../utils\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nconst jwt = require('jsonwebtoken');\nconst requireAuth = async (req, res, next) => {\n  if (!(req.headers && req.headers['x-token'])) {\n    return (0, _utils.errorResponse)(req, res, 'Token is not provided.', 401);\n  }\n  const token = req.headers['x-token'];\n  try {\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\n    req.user = decoded.user;\n    const user = await _models.default.findOne({\n      where: {\n        id: req.user.userId\n      }\n    });\n    if (!user) {\n      return (0, _utils.errorResponse)(req, res, 'User not found.', 401);\n    }\n    const reqUser = _objectSpread({}, user.get());\n    reqUser.userId = user.id;\n    req.user = reqUser;\n    return next();\n  } catch (e) {\n    return (0, _utils.errorResponse)(req, res, 'Invalid token provided.', 401);\n  }\n};\nvar _default = requireAuth;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwicmVxdWlyZUF1dGgiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVycyIsImVycm9yUmVzcG9uc2UiLCJ0b2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsInVzZXIiLCJVc2VyIiwiZmluZE9uZSIsIndoZXJlIiwiaWQiLCJ1c2VySWQiLCJyZXFVc2VyIiwiZ2V0IiwiZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJyZXF1aXJlQXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlciBmcm9tICcuLi9kYi9tb2RlbHMnO1xuaW1wb3J0IHsgZXJyb3JSZXNwb25zZSB9IGZyb20gJy4uL3V0aWxzJztcblxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG5cbmNvbnN0IHJlcXVpcmVBdXRoID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGlmICghKHJlcS5oZWFkZXJzICYmIHJlcS5oZWFkZXJzWyd4LXRva2VuJ10pKSB7XG4gICAgcmV0dXJuIGVycm9yUmVzcG9uc2UoXG4gICAgICByZXEsXG4gICAgICByZXMsXG4gICAgICAnVG9rZW4gaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICA0MDEsXG4gICAgKTtcbiAgfVxuICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzWyd4LXRva2VuJ107XG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xuICAgIHJlcS51c2VyID0gZGVjb2RlZC51c2VyO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHJlcS51c2VyLnVzZXJJZCB9LFxuICAgIH0pO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIGVycm9yUmVzcG9uc2UoXG4gICAgICAgIHJlcSxcbiAgICAgICAgcmVzLFxuICAgICAgICAnVXNlciBub3QgZm91bmQuJyxcbiAgICAgICAgNDAxLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgcmVxVXNlciA9IHsgLi4udXNlci5nZXQoKSB9O1xuICAgIHJlcVVzZXIudXNlcklkID0gdXNlci5pZDtcbiAgICByZXEudXNlciA9IHJlcVVzZXI7XG4gICAgcmV0dXJuIG5leHQoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBlcnJvclJlc3BvbnNlKFxuICAgICAgcmVxLFxuICAgICAgcmVzLFxuICAgICAgJ0ludmFsaWQgdG9rZW4gcHJvdmlkZWQuJyxcbiAgICAgIDQwMSxcbiAgICApO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCByZXF1aXJlQXV0aDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQXlDO0FBQUE7QUFFekMsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsY0FBYyxDQUFDO0FBRW5DLE1BQU1DLFdBQVcsR0FBRyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzVDLElBQUksRUFBRUYsR0FBRyxDQUFDRyxPQUFPLElBQUlILEdBQUcsQ0FBQ0csT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUU7SUFDNUMsT0FBTyxJQUFBQyxvQkFBYSxFQUNsQkosR0FBRyxFQUNIQyxHQUFHLEVBQ0gsd0JBQXdCLEVBQ3hCLEdBQUcsQ0FDSjtFQUNIO0VBQ0EsTUFBTUksS0FBSyxHQUFHTCxHQUFHLENBQUNHLE9BQU8sQ0FBQyxTQUFTLENBQUM7RUFDcEMsSUFBSTtJQUNGLE1BQU1HLE9BQU8sR0FBR1QsR0FBRyxDQUFDVSxNQUFNLENBQUNGLEtBQUssRUFBRUcsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFVBQVUsQ0FBQztJQUN6RFYsR0FBRyxDQUFDVyxJQUFJLEdBQUdMLE9BQU8sQ0FBQ0ssSUFBSTtJQUN2QixNQUFNQSxJQUFJLEdBQUcsTUFBTUMsZUFBSSxDQUFDQyxPQUFPLENBQUM7TUFDOUJDLEtBQUssRUFBRTtRQUFFQyxFQUFFLEVBQUVmLEdBQUcsQ0FBQ1csSUFBSSxDQUFDSztNQUFPO0lBQy9CLENBQUMsQ0FBQztJQUNGLElBQUksQ0FBQ0wsSUFBSSxFQUFFO01BQ1QsT0FBTyxJQUFBUCxvQkFBYSxFQUNsQkosR0FBRyxFQUNIQyxHQUFHLEVBQ0gsaUJBQWlCLEVBQ2pCLEdBQUcsQ0FDSjtJQUNIO0lBQ0EsTUFBTWdCLE9BQU8scUJBQVFOLElBQUksQ0FBQ08sR0FBRyxFQUFFLENBQUU7SUFDakNELE9BQU8sQ0FBQ0QsTUFBTSxHQUFHTCxJQUFJLENBQUNJLEVBQUU7SUFDeEJmLEdBQUcsQ0FBQ1csSUFBSSxHQUFHTSxPQUFPO0lBQ2xCLE9BQU9mLElBQUksRUFBRTtFQUNmLENBQUMsQ0FBQyxPQUFPaUIsQ0FBQyxFQUFFO0lBQ1YsT0FBTyxJQUFBZixvQkFBYSxFQUNsQkosR0FBRyxFQUNIQyxHQUFHLEVBQ0gseUJBQXlCLEVBQ3pCLEdBQUcsQ0FDSjtFQUNIO0FBQ0YsQ0FBQztBQUFDLGVBRWFGLFdBQVc7QUFBQSJ9","map":{"version":3,"names":["jwt","require","requireAuth","req","res","next","headers","errorResponse","token","decoded","verify","process","env","JWT_SECRET","user","User","findOne","where","id","userId","reqUser","get","e"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/middlewares/","sources":["requireAuth.js"],"sourcesContent":["import User from '../db/models';\nimport { errorResponse } from '../utils';\n\nconst jwt = require('jsonwebtoken');\n\nconst requireAuth = async (req, res, next) => {\n  if (!(req.headers && req.headers['x-token'])) {\n    return errorResponse(\n      req,\n      res,\n      'Token is not provided.',\n      401,\n    );\n  }\n  const token = req.headers['x-token'];\n  try {\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\n    req.user = decoded.user;\n    const user = await User.findOne({\n      where: { id: req.user.userId },\n    });\n    if (!user) {\n      return errorResponse(\n        req,\n        res,\n        'User not found.',\n        401,\n      );\n    }\n    const reqUser = { ...user.get() };\n    reqUser.userId = user.id;\n    req.user = reqUser;\n    return next();\n  } catch (e) {\n    return errorResponse(\n      req,\n      res,\n      'Invalid token provided.',\n      401,\n    );\n  }\n};\n\nexport default requireAuth;\n"],"mappings":";;;;;;;;AAAA;AACA;AAAyC;AAAA;AAEzC,MAAMA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AAEnC,MAAMC,WAAW,GAAG,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC5C,IAAI,EAAEF,GAAG,CAACG,OAAO,IAAIH,GAAG,CAACG,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE;IAC5C,OAAO,IAAAC,oBAAa,EAClBJ,GAAG,EACHC,GAAG,EACH,wBAAwB,EACxB,GAAG,CACJ;EACH;EACA,MAAMI,KAAK,GAAGL,GAAG,CAACG,OAAO,CAAC,SAAS,CAAC;EACpC,IAAI;IACF,MAAMG,OAAO,GAAGT,GAAG,CAACU,MAAM,CAACF,KAAK,EAAEG,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;IACzDV,GAAG,CAACW,IAAI,GAAGL,OAAO,CAACK,IAAI;IACvB,MAAMA,IAAI,GAAG,MAAMC,eAAI,CAACC,OAAO,CAAC;MAC9BC,KAAK,EAAE;QAAEC,EAAE,EAAEf,GAAG,CAACW,IAAI,CAACK;MAAO;IAC/B,CAAC,CAAC;IACF,IAAI,CAACL,IAAI,EAAE;MACT,OAAO,IAAAP,oBAAa,EAClBJ,GAAG,EACHC,GAAG,EACH,iBAAiB,EACjB,GAAG,CACJ;IACH;IACA,MAAMgB,OAAO,qBAAQN,IAAI,CAACO,GAAG,EAAE,CAAE;IACjCD,OAAO,CAACD,MAAM,GAAGL,IAAI,CAACI,EAAE;IACxBf,GAAG,CAACW,IAAI,GAAGM,OAAO;IAClB,OAAOf,IAAI,EAAE;EACf,CAAC,CAAC,OAAOiB,CAAC,EAAE;IACV,OAAO,IAAAf,oBAAa,EAClBJ,GAAG,EACHC,GAAG,EACH,yBAAyB,EACzB,GAAG,CACJ;EACH;AACF,CAAC;AAAC,eAEaF,WAAW;AAAA"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/middlewares/errorHandler.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _utils = require(\"../utils\");\nconst errorHandler = (err, req, res) => {\n  if (err && err.name === 'ValidationError') {\n    let messages = err.details.body.map(e => e.message);\n    if (messages.length && messages.length > 1) {\n      messages = `${messages.join(', ')} are required fields`;\n    } else {\n      messages = `${messages.join(', ')} is required field`;\n    }\n    return (0, _utils.errorResponse)(req, res, messages, 400);\n  }\n  return (0, _utils.errorResponse)(req, res, err.message, 500);\n};\nvar _default = errorHandler;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlcnJvckhhbmRsZXIiLCJlcnIiLCJyZXEiLCJyZXMiLCJuYW1lIiwibWVzc2FnZXMiLCJkZXRhaWxzIiwiYm9keSIsIm1hcCIsImUiLCJtZXNzYWdlIiwibGVuZ3RoIiwiam9pbiIsImVycm9yUmVzcG9uc2UiXSwic291cmNlUm9vdCI6Ii9ob21lL3N0dW5uYS9Eb2N1bWVudHMvZGV2L3dhdGVyLWxldmVsLWFuZC1xdWFsaXR5LXNlbnNvci93YXRlcl9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiZXJyb3JIYW5kbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVycm9yUmVzcG9uc2UgfSBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IGVycm9ySGFuZGxlciA9IChlcnIsIHJlcSwgcmVzKSA9PiB7XG4gIGlmIChlcnIgJiYgZXJyLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InKSB7XG4gICAgbGV0IG1lc3NhZ2VzID0gZXJyLmRldGFpbHMuYm9keS5tYXAoKGUpID0+IGUubWVzc2FnZSk7XG4gICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCAmJiBtZXNzYWdlcy5sZW5ndGggPiAxKSB7XG4gICAgICBtZXNzYWdlcyA9IGAke21lc3NhZ2VzLmpvaW4oJywgJyl9IGFyZSByZXF1aXJlZCBmaWVsZHNgO1xuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlcyA9IGAke21lc3NhZ2VzLmpvaW4oJywgJyl9IGlzIHJlcXVpcmVkIGZpZWxkYDtcbiAgICB9XG4gICAgcmV0dXJuIGVycm9yUmVzcG9uc2UocmVxLCByZXMsIG1lc3NhZ2VzLCA0MDApO1xuICB9XG4gIHJldHVybiBlcnJvclJlc3BvbnNlKHJlcSwgcmVzLCBlcnIubWVzc2FnZSwgNTAwKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGVycm9ySGFuZGxlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFFQSxNQUFNQSxZQUFZLEdBQUcsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxJQUFJRixHQUFHLElBQUlBLEdBQUcsQ0FBQ0csSUFBSSxLQUFLLGlCQUFpQixFQUFFO0lBQ3pDLElBQUlDLFFBQVEsR0FBR0osR0FBRyxDQUFDSyxPQUFPLENBQUNDLElBQUksQ0FBQ0MsR0FBRyxDQUFFQyxDQUFDLElBQUtBLENBQUMsQ0FBQ0MsT0FBTyxDQUFDO0lBQ3JELElBQUlMLFFBQVEsQ0FBQ00sTUFBTSxJQUFJTixRQUFRLENBQUNNLE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDMUNOLFFBQVEsR0FBSSxHQUFFQSxRQUFRLENBQUNPLElBQUksQ0FBQyxJQUFJLENBQUUsc0JBQXFCO0lBQ3pELENBQUMsTUFBTTtNQUNMUCxRQUFRLEdBQUksR0FBRUEsUUFBUSxDQUFDTyxJQUFJLENBQUMsSUFBSSxDQUFFLG9CQUFtQjtJQUN2RDtJQUNBLE9BQU8sSUFBQUMsb0JBQWEsRUFBQ1gsR0FBRyxFQUFFQyxHQUFHLEVBQUVFLFFBQVEsRUFBRSxHQUFHLENBQUM7RUFDL0M7RUFDQSxPQUFPLElBQUFRLG9CQUFhLEVBQUNYLEdBQUcsRUFBRUMsR0FBRyxFQUFFRixHQUFHLENBQUNTLE9BQU8sRUFBRSxHQUFHLENBQUM7QUFDbEQsQ0FBQztBQUFDLGVBRWFWLFlBQVk7QUFBQSJ9","map":{"version":3,"names":["errorHandler","err","req","res","name","messages","details","body","map","e","message","length","join","errorResponse"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/middlewares/","sources":["errorHandler.js"],"sourcesContent":["import { errorResponse } from '../utils';\n\nconst errorHandler = (err, req, res) => {\n  if (err && err.name === 'ValidationError') {\n    let messages = err.details.body.map((e) => e.message);\n    if (messages.length && messages.length > 1) {\n      messages = `${messages.join(', ')} are required fields`;\n    } else {\n      messages = `${messages.join(', ')} is required field`;\n    }\n    return errorResponse(req, res, messages, 400);\n  }\n  return errorResponse(req, res, err.message, 500);\n};\n\nexport default errorHandler;\n"],"mappings":";;;;;;AAAA;AAEA,MAAMA,YAAY,GAAG,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,KAAK;EACtC,IAAIF,GAAG,IAAIA,GAAG,CAACG,IAAI,KAAK,iBAAiB,EAAE;IACzC,IAAIC,QAAQ,GAAGJ,GAAG,CAACK,OAAO,CAACC,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,OAAO,CAAC;IACrD,IAAIL,QAAQ,CAACM,MAAM,IAAIN,QAAQ,CAACM,MAAM,GAAG,CAAC,EAAE;MAC1CN,QAAQ,GAAI,GAAEA,QAAQ,CAACO,IAAI,CAAC,IAAI,CAAE,sBAAqB;IACzD,CAAC,MAAM;MACLP,QAAQ,GAAI,GAAEA,QAAQ,CAACO,IAAI,CAAC,IAAI,CAAE,oBAAmB;IACvD;IACA,OAAO,IAAAC,oBAAa,EAACX,GAAG,EAAEC,GAAG,EAAEE,QAAQ,EAAE,GAAG,CAAC;EAC/C;EACA,OAAO,IAAAQ,oBAAa,EAACX,GAAG,EAAEC,GAAG,EAAEF,GAAG,CAACS,OAAO,EAAE,GAAG,CAAC;AAClD,CAAC;AAAC,eAEaV,YAAY;AAAA"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/routes/stats.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressValidation = require(\"express-validation\");\nvar statsValidator = _interopRequireWildcard(require(\"../controllers/stats/stats.validator\"));\nvar statsController = _interopRequireWildcard(require(\"../controllers/stats/stats.controller\"));\nvar _requireAuth = _interopRequireDefault(require(\"../middlewares/requireAuth\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nconst router = _express.default.Router();\n\n/**\n * @route POST /api/stats\n * @Body temperature, ph, oxygen, ec\n * @desc Create a new stats\n * @access Private\n * */\nrouter.post('/', (0, _expressValidation.validate)(statsValidator.statsSchema), _requireAuth.default, statsController.postStats);\n\n/**\n * @route GET /api/stats\n * @desc Get all stats\n * @access Private\n * */\nrouter.get('/', _requireAuth.default, statsController.getStats);\n\n/**\n * @route POST /api/stats/range\n * @Body start, end\n * @desc Get stats in a range\n * @access Private\n * */\nrouter.get('/range', (0, _expressValidation.validate)(statsValidator.statsRangeSchema), _requireAuth.default, statsController.getStatsRange);\n\n/**\n * @route GET /api/stats/latest\n * @desc Get latest stats\n * @access Private\n * */\nrouter.get('/latest', _requireAuth.default, statsController.getLatestStats);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwicG9zdCIsInZhbGlkYXRlIiwic3RhdHNWYWxpZGF0b3IiLCJzdGF0c1NjaGVtYSIsInJlcXVpcmVBdXRoIiwic3RhdHNDb250cm9sbGVyIiwicG9zdFN0YXRzIiwiZ2V0IiwiZ2V0U3RhdHMiLCJzdGF0c1JhbmdlU2NoZW1hIiwiZ2V0U3RhdHNSYW5nZSIsImdldExhdGVzdFN0YXRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9zdHVubmEvRG9jdW1lbnRzL2Rldi93YXRlci1sZXZlbC1hbmQtcXVhbGl0eS1zZW5zb3Ivd2F0ZXJfc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJzdGF0cy5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyB2YWxpZGF0ZSB9IGZyb20gJ2V4cHJlc3MtdmFsaWRhdGlvbic7XG5cbmltcG9ydCAqIGFzIHN0YXRzVmFsaWRhdG9yIGZyb20gJy4uL2NvbnRyb2xsZXJzL3N0YXRzL3N0YXRzLnZhbGlkYXRvcic7XG5pbXBvcnQgKiBhcyBzdGF0c0NvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlcnMvc3RhdHMvc3RhdHMuY29udHJvbGxlcic7XG5pbXBvcnQgcmVxdWlyZUF1dGggZnJvbSAnLi4vbWlkZGxld2FyZXMvcmVxdWlyZUF1dGgnO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4vKipcbiAqIEByb3V0ZSBQT1NUIC9hcGkvc3RhdHNcbiAqIEBCb2R5IHRlbXBlcmF0dXJlLCBwaCwgb3h5Z2VuLCBlY1xuICogQGRlc2MgQ3JlYXRlIGEgbmV3IHN0YXRzXG4gKiBAYWNjZXNzIFByaXZhdGVcbiAqICovXG5yb3V0ZXIucG9zdChcbiAgJy8nLFxuICB2YWxpZGF0ZShzdGF0c1ZhbGlkYXRvci5zdGF0c1NjaGVtYSksXG4gIHJlcXVpcmVBdXRoLFxuICBzdGF0c0NvbnRyb2xsZXIucG9zdFN0YXRzLFxuKTtcblxuLyoqXG4gKiBAcm91dGUgR0VUIC9hcGkvc3RhdHNcbiAqIEBkZXNjIEdldCBhbGwgc3RhdHNcbiAqIEBhY2Nlc3MgUHJpdmF0ZVxuICogKi9cbnJvdXRlci5nZXQoJy8nLCByZXF1aXJlQXV0aCwgc3RhdHNDb250cm9sbGVyLmdldFN0YXRzKTtcblxuLyoqXG4gKiBAcm91dGUgUE9TVCAvYXBpL3N0YXRzL3JhbmdlXG4gKiBAQm9keSBzdGFydCwgZW5kXG4gKiBAZGVzYyBHZXQgc3RhdHMgaW4gYSByYW5nZVxuICogQGFjY2VzcyBQcml2YXRlXG4gKiAqL1xucm91dGVyLmdldChcbiAgJy9yYW5nZScsXG4gIHZhbGlkYXRlKHN0YXRzVmFsaWRhdG9yLnN0YXRzUmFuZ2VTY2hlbWEpLFxuICByZXF1aXJlQXV0aCxcbiAgc3RhdHNDb250cm9sbGVyLmdldFN0YXRzUmFuZ2UsXG4pO1xuXG4vKipcbiAqIEByb3V0ZSBHRVQgL2FwaS9zdGF0cy9sYXRlc3RcbiAqIEBkZXNjIEdldCBsYXRlc3Qgc3RhdHNcbiAqIEBhY2Nlc3MgUHJpdmF0ZVxuICogKi9cbnJvdXRlci5nZXQoJy9sYXRlc3QnLCByZXF1aXJlQXV0aCwgc3RhdHNDb250cm9sbGVyLmdldExhdGVzdFN0YXRzKTtcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFxRDtBQUFBO0FBRXJELE1BQU1BLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUYsTUFBTSxDQUFDRyxJQUFJLENBQ1QsR0FBRyxFQUNILElBQUFDLDJCQUFRLEVBQUNDLGNBQWMsQ0FBQ0MsV0FBVyxDQUFDLEVBQ3BDQyxvQkFBVyxFQUNYQyxlQUFlLENBQUNDLFNBQVMsQ0FDMUI7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBVCxNQUFNLENBQUNVLEdBQUcsQ0FBQyxHQUFHLEVBQUVILG9CQUFXLEVBQUVDLGVBQWUsQ0FBQ0csUUFBUSxDQUFDOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQVgsTUFBTSxDQUFDVSxHQUFHLENBQ1IsUUFBUSxFQUNSLElBQUFOLDJCQUFRLEVBQUNDLGNBQWMsQ0FBQ08sZ0JBQWdCLENBQUMsRUFDekNMLG9CQUFXLEVBQ1hDLGVBQWUsQ0FBQ0ssYUFBYSxDQUM5Qjs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FiLE1BQU0sQ0FBQ1UsR0FBRyxDQUFDLFNBQVMsRUFBRUgsb0JBQVcsRUFBRUMsZUFBZSxDQUFDTSxjQUFjLENBQUMifQ==","map":{"version":3,"names":["router","express","Router","post","validate","statsValidator","statsSchema","requireAuth","statsController","postStats","get","getStats","statsRangeSchema","getStatsRange","getLatestStats"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/routes/","sources":["stats.routes.js"],"sourcesContent":["import express from 'express';\nimport { validate } from 'express-validation';\n\nimport * as statsValidator from '../controllers/stats/stats.validator';\nimport * as statsController from '../controllers/stats/stats.controller';\nimport requireAuth from '../middlewares/requireAuth';\n\nconst router = express.Router();\n\n/**\n * @route POST /api/stats\n * @Body temperature, ph, oxygen, ec\n * @desc Create a new stats\n * @access Private\n * */\nrouter.post(\n  '/',\n  validate(statsValidator.statsSchema),\n  requireAuth,\n  statsController.postStats,\n);\n\n/**\n * @route GET /api/stats\n * @desc Get all stats\n * @access Private\n * */\nrouter.get('/', requireAuth, statsController.getStats);\n\n/**\n * @route POST /api/stats/range\n * @Body start, end\n * @desc Get stats in a range\n * @access Private\n * */\nrouter.get(\n  '/range',\n  validate(statsValidator.statsRangeSchema),\n  requireAuth,\n  statsController.getStatsRange,\n);\n\n/**\n * @route GET /api/stats/latest\n * @desc Get latest stats\n * @access Private\n * */\nrouter.get('/latest', requireAuth, statsController.getLatestStats);\n"],"mappings":";;;AAAA;AACA;AAEA;AACA;AACA;AAAqD;AAAA;AAErD,MAAMA,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACAF,MAAM,CAACG,IAAI,CACT,GAAG,EACH,IAAAC,2BAAQ,EAACC,cAAc,CAACC,WAAW,CAAC,EACpCC,oBAAW,EACXC,eAAe,CAACC,SAAS,CAC1B;;AAED;AACA;AACA;AACA;AACA;AACAT,MAAM,CAACU,GAAG,CAAC,GAAG,EAAEH,oBAAW,EAAEC,eAAe,CAACG,QAAQ,CAAC;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACAX,MAAM,CAACU,GAAG,CACR,QAAQ,EACR,IAAAN,2BAAQ,EAACC,cAAc,CAACO,gBAAgB,CAAC,EACzCL,oBAAW,EACXC,eAAe,CAACK,aAAa,CAC9B;;AAED;AACA;AACA;AACA;AACA;AACAb,MAAM,CAACU,GAAG,CAAC,SAAS,EAAEH,oBAAW,EAAEC,eAAe,CAACM,cAAc,CAAC"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/stats/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/stats/stats.validator.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.statsSchema = exports.statsRangeSchema = void 0;\nvar _expressValidation = require(\"express-validation\");\nconst statsSchema = {\n  body: _expressValidation.Joi.object({\n    temperature: _expressValidation.Joi.number().required(),\n    ph: _expressValidation.Joi.number().required(),\n    turb: _expressValidation.Joi.number().required()\n  })\n};\nexports.statsSchema = statsSchema;\nconst statsRangeSchema = {\n  body: _expressValidation.Joi.object({\n    start: _expressValidation.Joi.date().required(),\n    end: _expressValidation.Joi.date().required()\n  })\n};\nexports.statsRangeSchema = statsRangeSchema;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdGF0c1NjaGVtYSIsImJvZHkiLCJKb2kiLCJvYmplY3QiLCJ0ZW1wZXJhdHVyZSIsIm51bWJlciIsInJlcXVpcmVkIiwicGgiLCJ0dXJiIiwic3RhdHNSYW5nZVNjaGVtYSIsInN0YXJ0IiwiZGF0ZSIsImVuZCJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci9zcmMvY29udHJvbGxlcnMvc3RhdHMvIiwic291cmNlcyI6WyJzdGF0cy52YWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSm9pIH0gZnJvbSAnZXhwcmVzcy12YWxpZGF0aW9uJztcblxuZXhwb3J0IGNvbnN0IHN0YXRzU2NoZW1hID0ge1xuICBib2R5OiBKb2kub2JqZWN0KHtcbiAgICB0ZW1wZXJhdHVyZTogSm9pLm51bWJlcigpLnJlcXVpcmVkKCksXG4gICAgcGg6IEpvaS5udW1iZXIoKS5yZXF1aXJlZCgpLFxuICAgIHR1cmI6IEpvaS5udW1iZXIoKS5yZXF1aXJlZCgpLFxuICB9KSxcbn07XG5cbmV4cG9ydCBjb25zdCBzdGF0c1JhbmdlU2NoZW1hID0ge1xuICBib2R5OiBKb2kub2JqZWN0KHtcbiAgICBzdGFydDogSm9pLmRhdGUoKS5yZXF1aXJlZCgpLFxuICAgIGVuZDogSm9pLmRhdGUoKS5yZXF1aXJlZCgpLFxuICB9KSxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBRU8sTUFBTUEsV0FBVyxHQUFHO0VBQ3pCQyxJQUFJLEVBQUVDLHNCQUFHLENBQUNDLE1BQU0sQ0FBQztJQUNmQyxXQUFXLEVBQUVGLHNCQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDQyxRQUFRLEVBQUU7SUFDcENDLEVBQUUsRUFBRUwsc0JBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNDLFFBQVEsRUFBRTtJQUMzQkUsSUFBSSxFQUFFTixzQkFBRyxDQUFDRyxNQUFNLEVBQUUsQ0FBQ0MsUUFBUTtFQUM3QixDQUFDO0FBQ0gsQ0FBQztBQUFDO0FBRUssTUFBTUcsZ0JBQWdCLEdBQUc7RUFDOUJSLElBQUksRUFBRUMsc0JBQUcsQ0FBQ0MsTUFBTSxDQUFDO0lBQ2ZPLEtBQUssRUFBRVIsc0JBQUcsQ0FBQ1MsSUFBSSxFQUFFLENBQUNMLFFBQVEsRUFBRTtJQUM1Qk0sR0FBRyxFQUFFVixzQkFBRyxDQUFDUyxJQUFJLEVBQUUsQ0FBQ0wsUUFBUTtFQUMxQixDQUFDO0FBQ0gsQ0FBQztBQUFDIn0=","map":{"version":3,"names":["statsSchema","body","Joi","object","temperature","number","required","ph","turb","statsRangeSchema","start","date","end"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/stats/","sources":["stats.validator.js"],"sourcesContent":["import { Joi } from 'express-validation';\n\nexport const statsSchema = {\n  body: Joi.object({\n    temperature: Joi.number().required(),\n    ph: Joi.number().required(),\n    turb: Joi.number().required(),\n  }),\n};\n\nexport const statsRangeSchema = {\n  body: Joi.object({\n    start: Joi.date().required(),\n    end: Joi.date().required(),\n  }),\n};\n"],"mappings":";;;;;;AAAA;AAEO,MAAMA,WAAW,GAAG;EACzBC,IAAI,EAAEC,sBAAG,CAACC,MAAM,CAAC;IACfC,WAAW,EAAEF,sBAAG,CAACG,MAAM,EAAE,CAACC,QAAQ,EAAE;IACpCC,EAAE,EAAEL,sBAAG,CAACG,MAAM,EAAE,CAACC,QAAQ,EAAE;IAC3BE,IAAI,EAAEN,sBAAG,CAACG,MAAM,EAAE,CAACC,QAAQ;EAC7B,CAAC;AACH,CAAC;AAAC;AAEK,MAAMG,gBAAgB,GAAG;EAC9BR,IAAI,EAAEC,sBAAG,CAACC,MAAM,CAAC;IACfO,KAAK,EAAER,sBAAG,CAACS,IAAI,EAAE,CAACL,QAAQ,EAAE;IAC5BM,GAAG,EAAEV,sBAAG,CAACS,IAAI,EAAE,CAACL,QAAQ;EAC1B,CAAC;AACH,CAAC;AAAC"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/stats/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/stats/stats.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.postStats = exports.getStatsRange = exports.getStats = exports.getLatestStats = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _models = _interopRequireDefault(require(\"../../db/models\"));\nvar _logger = _interopRequireDefault(require(\"../../utils/logger\"));\nvar _utils = require(\"../../utils\");\nconst postStats = async (req, res) => {\n  _logger.default.info('Posting stats');\n  try {\n    req.body.userId = req.user.id;\n    const stats = await _models.default.create(req.body);\n    return (0, _utils.successResponse)(req, res, stats, 'Stats created successfully', 201);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 'Failed', 500);\n  }\n};\nexports.postStats = postStats;\nconst getStats = async (req, res) => {\n  _logger.default.info('Getting stats');\n  try {\n    const stats = await _models.default.findAll({\n      where: {\n        userId: req.user.id\n      }\n    });\n    return (0, _utils.successResponse)(req, res, stats, 'Stats retrieved successfully', 200);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 'Failed', 500);\n  }\n};\nexports.getStats = getStats;\nconst getStatsRange = async (req, res) => {\n  _logger.default.info('Getting stats range');\n  try {\n    const {\n      start,\n      end\n    } = req.body;\n    const stats = await _models.default.findAll({\n      where: {\n        userId: req.user.id,\n        createdAt: {\n          [_sequelize.Op.between]: [start, end]\n        }\n      }\n    });\n    return (0, _utils.successResponse)(req, res, stats, 200);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 'Failed', 500);\n  }\n};\nexports.getStatsRange = getStatsRange;\nconst getLatestStats = async (req, res) => {\n  _logger.default.info('Getting latest stats');\n  try {\n    const stats = await _models.default.findAll({\n      where: {\n        userId: req.user.id\n      },\n      order: [['createdAt', 'DESC']],\n      limit: 1\n    });\n    return (0, _utils.successResponse)(req, res, stats, 200);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 'Failed', 500);\n  }\n};\nexports.getLatestStats = getLatestStats;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwb3N0U3RhdHMiLCJyZXEiLCJyZXMiLCJsb2dnZXIiLCJpbmZvIiwiYm9keSIsInVzZXJJZCIsInVzZXIiLCJpZCIsInN0YXRzIiwiU3RhdHMiLCJjcmVhdGUiLCJzdWNjZXNzUmVzcG9uc2UiLCJlcnJvciIsImVycm9yUmVzcG9uc2UiLCJtZXNzYWdlIiwiZ2V0U3RhdHMiLCJmaW5kQWxsIiwid2hlcmUiLCJnZXRTdGF0c1JhbmdlIiwic3RhcnQiLCJlbmQiLCJjcmVhdGVkQXQiLCJPcCIsImJldHdlZW4iLCJnZXRMYXRlc3RTdGF0cyIsIm9yZGVyIiwibGltaXQiXSwic291cmNlUm9vdCI6Ii9ob21lL3N0dW5uYS9Eb2N1bWVudHMvZGV2L3dhdGVyLWxldmVsLWFuZC1xdWFsaXR5LXNlbnNvci93YXRlcl9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXJzL3N0YXRzLyIsInNvdXJjZXMiOlsic3RhdHMuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgU3RhdHMgZnJvbSAnLi4vLi4vZGIvbW9kZWxzJztcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vLi4vdXRpbHMvbG9nZ2VyJztcbmltcG9ydCB7IGVycm9yUmVzcG9uc2UsIHN1Y2Nlc3NSZXNwb25zZSB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuZXhwb3J0IGNvbnN0IHBvc3RTdGF0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBsb2dnZXIuaW5mbygnUG9zdGluZyBzdGF0cycpO1xuICB0cnkge1xuICAgIHJlcS5ib2R5LnVzZXJJZCA9IHJlcS51c2VyLmlkO1xuXG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBTdGF0cy5jcmVhdGUocmVxLmJvZHkpO1xuICAgIHJldHVybiBzdWNjZXNzUmVzcG9uc2UocmVxLCByZXMsIHN0YXRzLCAnU3RhdHMgY3JlYXRlZCBzdWNjZXNzZnVsbHknLCAyMDEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgcmV0dXJuIGVycm9yUmVzcG9uc2UocmVxLCByZXMsIGVycm9yLm1lc3NhZ2UsICdGYWlsZWQnLCA1MDApO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U3RhdHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ0dldHRpbmcgc3RhdHMnKTtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdGF0cyA9IGF3YWl0IFN0YXRzLmZpbmRBbGwoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHN1Y2Nlc3NSZXNwb25zZShyZXEsIHJlcywgc3RhdHMsICdTdGF0cyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JywgMjAwKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiBlcnJvclJlc3BvbnNlKHJlcSwgcmVzLCBlcnJvci5tZXNzYWdlLCAnRmFpbGVkJywgNTAwKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldFN0YXRzUmFuZ2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ0dldHRpbmcgc3RhdHMgcmFuZ2UnKTtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBTdGF0cy5maW5kQWxsKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgIFtPcC5iZXR3ZWVuXTogW3N0YXJ0LCBlbmRdLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gc3VjY2Vzc1Jlc3BvbnNlKHJlcSwgcmVzLCBzdGF0cywgMjAwKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiBlcnJvclJlc3BvbnNlKHJlcSwgcmVzLCBlcnJvci5tZXNzYWdlLCAnRmFpbGVkJywgNTAwKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldExhdGVzdFN0YXRzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGxvZ2dlci5pbmZvKCdHZXR0aW5nIGxhdGVzdCBzdGF0cycpO1xuICB0cnkge1xuICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgU3RhdHMuZmluZEFsbCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgICAgfSxcbiAgICAgIG9yZGVyOiBbWydjcmVhdGVkQXQnLCAnREVTQyddXSxcbiAgICAgIGxpbWl0OiAxLFxuICAgIH0pO1xuICAgIHJldHVybiBzdWNjZXNzUmVzcG9uc2UocmVxLCByZXMsIHN0YXRzLCAyMDApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgcmV0dXJuIGVycm9yUmVzcG9uc2UocmVxLCByZXMsIGVycm9yLm1lc3NhZ2UsICdGYWlsZWQnLCA1MDApO1xuICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFTyxNQUFNQSxTQUFTLEdBQUcsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDM0NDLGVBQU0sQ0FBQ0MsSUFBSSxDQUFDLGVBQWUsQ0FBQztFQUM1QixJQUFJO0lBQ0ZILEdBQUcsQ0FBQ0ksSUFBSSxDQUFDQyxNQUFNLEdBQUdMLEdBQUcsQ0FBQ00sSUFBSSxDQUFDQyxFQUFFO0lBRTdCLE1BQU1DLEtBQUssR0FBRyxNQUFNQyxlQUFLLENBQUNDLE1BQU0sQ0FBQ1YsR0FBRyxDQUFDSSxJQUFJLENBQUM7SUFDMUMsT0FBTyxJQUFBTyxzQkFBZSxFQUFDWCxHQUFHLEVBQUVDLEdBQUcsRUFBRU8sS0FBSyxFQUFFLDRCQUE0QixFQUFFLEdBQUcs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","map":{"version":3,"names":["postStats","req","res","logger","info","body","userId","user","id","stats","Stats","create","successResponse","error","errorResponse","message","getStats","findAll","where","getStatsRange","start","end","createdAt","Op","between","getLatestStats","order","limit"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/stats/","sources":["stats.controller.js"],"sourcesContent":["import { Op } from 'sequelize';\nimport Stats from '../../db/models';\nimport logger from '../../utils/logger';\nimport { errorResponse, successResponse } from '../../utils';\n\nexport const postStats = async (req, res) => {\n  logger.info('Posting stats');\n  try {\n    req.body.userId = req.user.id;\n\n    const stats = await Stats.create(req.body);\n    return successResponse(req, res, stats, 'Stats created successfully', 201);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 'Failed', 500);\n  }\n};\n\nexport const getStats = async (req, res) => {\n  logger.info('Getting stats');\n  try {\n    const stats = await Stats.findAll({\n      where: {\n        userId: req.user.id,\n      },\n    });\n    return successResponse(req, res, stats, 'Stats retrieved successfully', 200);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 'Failed', 500);\n  }\n};\n\nexport const getStatsRange = async (req, res) => {\n  logger.info('Getting stats range');\n  try {\n    const { start, end } = req.body;\n\n    const stats = await Stats.findAll({\n      where: {\n        userId: req.user.id,\n        createdAt: {\n          [Op.between]: [start, end],\n        },\n      },\n    });\n    return successResponse(req, res, stats, 200);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 'Failed', 500);\n  }\n};\n\nexport const getLatestStats = async (req, res) => {\n  logger.info('Getting latest stats');\n  try {\n    const stats = await Stats.findAll({\n      where: {\n        userId: req.user.id,\n      },\n      order: [['createdAt', 'DESC']],\n      limit: 1,\n    });\n    return successResponse(req, res, stats, 200);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 'Failed', 500);\n  }\n};\n"],"mappings":"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"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/config/sequelize.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _chalk = _interopRequireDefault(require(\"chalk\"));\nvar _sequelize = _interopRequireDefault(require(\"sequelize\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nconst env = process.env.NODE_ENV || 'development';\nconst sequelize = new _sequelize.default(_objectSpread(_objectSpread({}, _config.default[env]), {}, {\n  models: [`${__dirname}../db/models`],\n  logging: msg => console.log(_chalk.default.green(msg))\n}));\nsequelize.authenticate().then(() => {\n  console.log(_chalk.default.greenBright('Connection has been established successfully.'));\n}).catch(err => {\n  console.error(_chalk.default.red('Unable to connect to the database:', err));\n});\nmodule.exports = sequelize;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJzZXF1ZWxpemUiLCJTZXF1ZWxpemUiLCJjb25maWciLCJtb2RlbHMiLCJfX2Rpcm5hbWUiLCJsb2dnaW5nIiwibXNnIiwiY29uc29sZSIsImxvZyIsImNoYWxrIiwiZ3JlZW4iLCJhdXRoZW50aWNhdGUiLCJ0aGVuIiwiZ3JlZW5CcmlnaHQiLCJjYXRjaCIsImVyciIsImVycm9yIiwicmVkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsic2VxdWVsaXplLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjaGFsayBmcm9tICdjaGFsayc7XG5pbXBvcnQgU2VxdWVsaXplIGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcblxuY29uc3QgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50JztcblxuY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZSh7XG4gIC4uLmNvbmZpZ1tlbnZdLFxuICBtb2RlbHM6IFtgJHtfX2Rpcm5hbWV9Li4vZGIvbW9kZWxzYF0sXG4gIGxvZ2dpbmc6IChtc2cpID0+IGNvbnNvbGUubG9nKGNoYWxrLmdyZWVuKG1zZykpLFxufSk7XG5cbnNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKS50aGVuKCgpID0+IHtcbiAgY29uc29sZS5sb2coY2hhbGsuZ3JlZW5CcmlnaHQoJ0Nvbm5lY3Rpb24gaGFzIGJlZW4gZXN0YWJsaXNoZWQgc3VjY2Vzc2Z1bGx5LicpKTtcbn0pLmNhdGNoKChlcnIpID0+IHtcbiAgY29uc29sZS5lcnJvcihjaGFsay5yZWQoJ1VuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBkYXRhYmFzZTonLCBlcnIpKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHNlcXVlbGl6ZTtcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUE4QjtBQUFBO0FBRTlCLE1BQU1BLEdBQUcsR0FBR0MsT0FBTyxDQUFDRCxHQUFHLENBQUNFLFFBQVEsSUFBSSxhQUFhO0FBRWpELE1BQU1DLFNBQVMsR0FBRyxJQUFJQyxrQkFBUyxpQ0FDMUJDLGVBQU0sQ0FBQ0wsR0FBRyxDQUFDO0VBQ2RNLE1BQU0sRUFBRSxDQUFFLEdBQUVDLFNBQVUsY0FBYSxDQUFDO0VBQ3BDQyxPQUFPLEVBQUdDLEdBQUcsSUFBS0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLGNBQUssQ0FBQ0MsS0FBSyxDQUFDSixHQUFHLENBQUM7QUFBQyxHQUMvQztBQUVGTixTQUFTLENBQUNXLFlBQVksRUFBRSxDQUFDQyxJQUFJLENBQUMsTUFBTTtFQUNsQ0wsT0FBTyxDQUFDQyxHQUFHLENBQUNDLGNBQUssQ0FBQ0ksV0FBVyxDQUFDLCtDQUErQyxDQUFDLENBQUM7QUFDakYsQ0FBQyxDQUFDLENBQUNDLEtBQUssQ0FBRUMsR0FBRyxJQUFLO0VBQ2hCUixPQUFPLENBQUNTLEtBQUssQ0FBQ1AsY0FBSyxDQUFDUSxHQUFHLENBQUMsb0NBQW9DLEVBQUVGLEdBQUcsQ0FBQyxDQUFDO0FBQ3JFLENBQUMsQ0FBQztBQUVGRyxNQUFNLENBQUNDLE9BQU8sR0FBR25CLFNBQVMifQ==","map":{"version":3,"names":["env","process","NODE_ENV","sequelize","Sequelize","config","models","__dirname","logging","msg","console","log","chalk","green","authenticate","then","greenBright","catch","err","error","red","module","exports"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/config/","sources":["sequelize.js"],"sourcesContent":["import chalk from 'chalk';\nimport Sequelize from 'sequelize';\nimport config from './config';\n\nconst env = process.env.NODE_ENV || 'development';\n\nconst sequelize = new Sequelize({\n  ...config[env],\n  models: [`${__dirname}../db/models`],\n  logging: (msg) => console.log(chalk.green(msg)),\n});\n\nsequelize.authenticate().then(() => {\n  console.log(chalk.greenBright('Connection has been established successfully.'));\n}).catch((err) => {\n  console.error(chalk.red('Unable to connect to the database:', err));\n});\n\nmodule.exports = sequelize;\n"],"mappings":";;;;AAAA;AACA;AACA;AAA8B;AAAA;AAE9B,MAAMA,GAAG,GAAGC,OAAO,CAACD,GAAG,CAACE,QAAQ,IAAI,aAAa;AAEjD,MAAMC,SAAS,GAAG,IAAIC,kBAAS,iCAC1BC,eAAM,CAACL,GAAG,CAAC;EACdM,MAAM,EAAE,CAAE,GAAEC,SAAU,cAAa,CAAC;EACpCC,OAAO,EAAGC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACC,cAAK,CAACC,KAAK,CAACJ,GAAG,CAAC;AAAC,GAC/C;AAEFN,SAAS,CAACW,YAAY,EAAE,CAACC,IAAI,CAAC,MAAM;EAClCL,OAAO,CAACC,GAAG,CAACC,cAAK,CAACI,WAAW,CAAC,+CAA+C,CAAC,CAAC;AACjF,CAAC,CAAC,CAACC,KAAK,CAAEC,GAAG,IAAK;EAChBR,OAAO,CAACS,KAAK,CAACP,cAAK,CAACQ,GAAG,CAAC,oCAAoC,EAAEF,GAAG,CAAC,CAAC;AACrE,CAAC,CAAC;AAEFG,MAAM,CAACC,OAAO,GAAGnB,SAAS"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _auth = _interopRequireDefault(require(\"./src/routes/auth.routes\"));\nvar _logger = _interopRequireDefault(require(\"./src/utils/logger\"));\nvar _errorHandler = _interopRequireDefault(require(\"./src/middlewares/errorHandler\"));\nvar _utils = require(\"./src/utils\");\nvar _stats = _interopRequireDefault(require(\"./src/routes/stats.routes\"));\nconst express = require('express');\nconst morgan = require('morgan');\nconst chalk = require('chalk');\nconst dotenv = require('dotenv');\nconst cors = require('cors');\nconst rTracer = require('cls-rtracer');\nconst app = express();\ndotenv.config();\nrequire('./src/config/sequelize');\n\n// Tracer\napp.use(rTracer.expressMiddleware());\n\n// cors\napp.use(cors());\n\n// logging\nif (process.env.NODE_ENV === 'development') {\n  app.use(morgan('combined'));\n}\napp.use(express.json());\napp.use('/api/v1/auth', _auth.default);\napp.use('/api/v1/stats', _stats.default);\napp.use(_errorHandler.default);\napp.all('*', (req, res) => {\n  _logger.default.info(chalk.bgYellow('Route not found'));\n  (0, _utils.errorResponse)(req, res, 'Route not found', 404);\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIm1vcmdhbiIsImNoYWxrIiwiZG90ZW52IiwiY29ycyIsInJUcmFjZXIiLCJhcHAiLCJjb25maWciLCJ1c2UiLCJleHByZXNzTWlkZGxld2FyZSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImpzb24iLCJhdXRoUm91dGVzIiwic3RhdHNSb3V0ZXMiLCJlcnJvckhhbmRsZXIiLCJhbGwiLCJyZXEiLCJyZXMiLCJsb2dnZXIiLCJpbmZvIiwiYmdZZWxsb3ciLCJlcnJvclJlc3BvbnNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci8iLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXV0aFJvdXRlcyBmcm9tICcuL3NyYy9yb3V0ZXMvYXV0aC5yb3V0ZXMnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICcuL3NyYy91dGlscy9sb2dnZXInO1xuaW1wb3J0IGVycm9ySGFuZGxlciBmcm9tICcuL3NyYy9taWRkbGV3YXJlcy9lcnJvckhhbmRsZXInO1xuaW1wb3J0IHsgZXJyb3JSZXNwb25zZSB9IGZyb20gJy4vc3JjL3V0aWxzJztcbmltcG9ydCBzdGF0c1JvdXRlcyBmcm9tICcuL3NyYy9yb3V0ZXMvc3RhdHMucm91dGVzJztcblxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IG1vcmdhbiA9IHJlcXVpcmUoJ21vcmdhbicpO1xuY29uc3QgY2hhbGsgPSByZXF1aXJlKCdjaGFsaycpO1xuXG5jb25zdCBkb3RlbnYgPSByZXF1aXJlKCdkb3RlbnYnKTtcblxuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcblxuY29uc3QgclRyYWNlciA9IHJlcXVpcmUoJ2Nscy1ydHJhY2VyJyk7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuZG90ZW52LmNvbmZpZygpO1xuXG5yZXF1aXJlKCcuL3NyYy9jb25maWcvc2VxdWVsaXplJyk7XG5cbi8vIFRyYWNlclxuYXBwLnVzZShyVHJhY2VyLmV4cHJlc3NNaWRkbGV3YXJlKCkpO1xuXG4vLyBjb3JzXG5hcHAudXNlKGNvcnMoKSk7XG5cbi8vIGxvZ2dpbmdcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICBhcHAudXNlKG1vcmdhbignY29tYmluZWQnKSk7XG59XG5cbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuXG5hcHAudXNlKCcvYXBpL3YxL2F1dGgnLCBhdXRoUm91dGVzKTtcbmFwcC51c2UoJy9hcGkvdjEvc3RhdHMnLCBzdGF0c1JvdXRlcyk7XG5cbmFwcC51c2UoZXJyb3JIYW5kbGVyKTtcblxuYXBwLmFsbCgnKicsIChyZXEsIHJlcykgPT4ge1xuICBsb2dnZXIuaW5mbyhjaGFsay5iZ1llbGxvdygnUm91dGUgbm90IGZvdW5kJykpO1xuICBlcnJvclJlc3BvbnNlKHJlcSwgcmVzLCAnUm91dGUgbm90IGZvdW5kJywgNDA0KTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDtcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTUUsS0FBSyxHQUFHRixPQUFPLENBQUMsT0FBTyxDQUFDO0FBRTlCLE1BQU1HLE1BQU0sR0FBR0gsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUVoQyxNQUFNSSxJQUFJLEdBQUdKLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFFNUIsTUFBTUssT0FBTyxHQUFHTCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBRXRDLE1BQU1NLEdBQUcsR0FBR1AsT0FBTyxFQUFFO0FBRXJCSSxNQUFNLENBQUNJLE1BQU0sRUFBRTtBQUVmUCxPQUFPLENBQUMsd0JBQXdCLENBQUM7O0FBRWpDO0FBQ0FNLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDSCxPQUFPLENBQUNJLGlCQUFpQixFQUFFLENBQUM7O0FBRXBDO0FBQ0FILEdBQUcsQ0FBQ0UsR0FBRyxDQUFDSixJQUFJLEVBQUUsQ0FBQzs7QUFFZjtBQUNBLElBQUlNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxFQUFFO0VBQzFDTixHQUFHLENBQUNFLEdBQUcsQ0FBQ1AsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzdCO0FBRUFLLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDVCxPQUFPLENBQUNjLElBQUksRUFBRSxDQUFDO0FBRXZCUCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxjQUFjLEVBQUVNLGFBQVUsQ0FBQztBQUNuQ1IsR0FBRyxDQUFDRSxHQUFHLENBQUMsZUFBZSxFQUFFTyxjQUFXLENBQUM7QUFFckNULEdBQUcsQ0FBQ0UsR0FBRyxDQUFDUSxxQkFBWSxDQUFDO0FBRXJCVixHQUFHLENBQUNXLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDekJDLGVBQU0sQ0FBQ0MsSUFBSSxDQUFDbkIsS0FBSyxDQUFDb0IsUUFBUSxDQUFDLGlCQUFpQixDQUFDLENBQUM7RUFDOUMsSUFBQUMsb0JBQWEsRUFBQ0wsR0FBRyxFQUFFQyxHQUFHLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxDQUFDO0FBQ2pELENBQUMsQ0FBQztBQUVGSyxNQUFNLENBQUNDLE9BQU8sR0FBR25CLEdBQUcifQ==","map":{"version":3,"names":["express","require","morgan","chalk","dotenv","cors","rTracer","app","config","use","expressMiddleware","process","env","NODE_ENV","json","authRoutes","statsRoutes","errorHandler","all","req","res","logger","info","bgYellow","errorResponse","module","exports"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/","sources":["app.js"],"sourcesContent":["import authRoutes from './src/routes/auth.routes';\nimport logger from './src/utils/logger';\nimport errorHandler from './src/middlewares/errorHandler';\nimport { errorResponse } from './src/utils';\nimport statsRoutes from './src/routes/stats.routes';\n\nconst express = require('express');\nconst morgan = require('morgan');\nconst chalk = require('chalk');\n\nconst dotenv = require('dotenv');\n\nconst cors = require('cors');\n\nconst rTracer = require('cls-rtracer');\n\nconst app = express();\n\ndotenv.config();\n\nrequire('./src/config/sequelize');\n\n// Tracer\napp.use(rTracer.expressMiddleware());\n\n// cors\napp.use(cors());\n\n// logging\nif (process.env.NODE_ENV === 'development') {\n  app.use(morgan('combined'));\n}\n\napp.use(express.json());\n\napp.use('/api/v1/auth', authRoutes);\napp.use('/api/v1/stats', statsRoutes);\n\napp.use(errorHandler);\n\napp.all('*', (req, res) => {\n  logger.info(chalk.bgYellow('Route not found'));\n  errorResponse(req, res, 'Route not found', 404);\n});\n\nmodule.exports = app;\n"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAME,KAAK,GAAGF,OAAO,CAAC,OAAO,CAAC;AAE9B,MAAMG,MAAM,GAAGH,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAMI,IAAI,GAAGJ,OAAO,CAAC,MAAM,CAAC;AAE5B,MAAMK,OAAO,GAAGL,OAAO,CAAC,aAAa,CAAC;AAEtC,MAAMM,GAAG,GAAGP,OAAO,EAAE;AAErBI,MAAM,CAACI,MAAM,EAAE;AAEfP,OAAO,CAAC,wBAAwB,CAAC;;AAEjC;AACAM,GAAG,CAACE,GAAG,CAACH,OAAO,CAACI,iBAAiB,EAAE,CAAC;;AAEpC;AACAH,GAAG,CAACE,GAAG,CAACJ,IAAI,EAAE,CAAC;;AAEf;AACA,IAAIM,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;EAC1CN,GAAG,CAACE,GAAG,CAACP,MAAM,CAAC,UAAU,CAAC,CAAC;AAC7B;AAEAK,GAAG,CAACE,GAAG,CAACT,OAAO,CAACc,IAAI,EAAE,CAAC;AAEvBP,GAAG,CAACE,GAAG,CAAC,cAAc,EAAEM,aAAU,CAAC;AACnCR,GAAG,CAACE,GAAG,CAAC,eAAe,EAAEO,cAAW,CAAC;AAErCT,GAAG,CAACE,GAAG,CAACQ,qBAAY,CAAC;AAErBV,GAAG,CAACW,GAAG,CAAC,GAAG,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzBC,eAAM,CAACC,IAAI,CAACnB,KAAK,CAACoB,QAAQ,CAAC,iBAAiB,CAAC,CAAC;EAC9C,IAAAC,oBAAa,EAACL,GAAG,EAAEC,GAAG,EAAE,iBAAiB,EAAE,GAAG,CAAC;AACjD,CAAC,CAAC;AAEFK,MAAM,CAACC,OAAO,GAAGnB,GAAG"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/routes/auth.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressValidation = require(\"express-validation\");\nvar authValidator = _interopRequireWildcard(require(\"../controllers/auth/auth.validator\"));\nvar authController = _interopRequireWildcard(require(\"../controllers/auth/auth.controller\"));\nvar _requireAuth = _interopRequireDefault(require(\"../middlewares/requireAuth\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nconst router = _express.default.Router();\n\n/**  Register a new user\n* @route POST /api/auth/register\n* @Body email, password, confirmPassword\n* @desc Register a new user\n* @access Public\n*/\nrouter.post('/register', (0, _expressValidation.validate)(authValidator.registerSchema, {\n  keyByField: true\n}, {\n  allowUnknown: true,\n  abortEarly: false,\n  errors: {\n    wrap: {\n      label: ''\n    }\n  }\n}), authController.register);\n\n/**  Login a user\n * @route POST /api/auth/login\n * @Body email, password\n * @desc Login a user\n * @access Public\n *\n * */\nrouter.post('/login', (0, _expressValidation.validate)(authValidator.loginSchema), authController.login);\n\n/**  Logout a user\n * @route POST /api/auth/logout\n * @desc Logout a user\n * @access Private\n *\n * */\nrouter.post('/logout', authController.logout);\n\n/**  Get current user\n * @route GET /api/auth/current\n * @desc Get current user\n * @access Private\n * */\nrouter.get('/current', _requireAuth.default, authController.getCurrentUser);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwicG9zdCIsInZhbGlkYXRlIiwiYXV0aFZhbGlkYXRvciIsInJlZ2lzdGVyU2NoZW1hIiwia2V5QnlGaWVsZCIsImFsbG93VW5rbm93biIsImFib3J0RWFybHkiLCJlcnJvcnMiLCJ3cmFwIiwibGFiZWwiLCJhdXRoQ29udHJvbGxlciIsInJlZ2lzdGVyIiwibG9naW5TY2hlbWEiLCJsb2dpbiIsImxvZ291dCIsImdldCIsInJlcXVpcmVBdXRoIiwiZ2V0Q3VycmVudFVzZXIiXSwic291cmNlUm9vdCI6Ii9ob21lL3N0dW5uYS9Eb2N1bWVudHMvZGV2L3dhdGVyLWxldmVsLWFuZC1xdWFsaXR5LXNlbnNvci93YXRlcl9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGgucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tICdleHByZXNzLXZhbGlkYXRpb24nO1xuaW1wb3J0ICogYXMgYXV0aFZhbGlkYXRvciBmcm9tICcuLi9jb250cm9sbGVycy9hdXRoL2F1dGgudmFsaWRhdG9yJztcbmltcG9ydCAqIGFzIGF1dGhDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL2F1dGgvYXV0aC5jb250cm9sbGVyJztcbmltcG9ydCByZXF1aXJlQXV0aCBmcm9tICcuLi9taWRkbGV3YXJlcy9yZXF1aXJlQXV0aCc7XG5cbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8qKiAgUmVnaXN0ZXIgYSBuZXcgdXNlclxuKiBAcm91dGUgUE9TVCAvYXBpL2F1dGgvcmVnaXN0ZXJcbiogQEJvZHkgZW1haWwsIHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmRcbiogQGRlc2MgUmVnaXN0ZXIgYSBuZXcgdXNlclxuKiBAYWNjZXNzIFB1YmxpY1xuKi9cbnJvdXRlci5wb3N0KFxuICAnL3JlZ2lzdGVyJyxcbiAgdmFsaWRhdGUoXG4gICAgYXV0aFZhbGlkYXRvci5yZWdpc3RlclNjaGVtYSxcbiAgICB7IGtleUJ5RmllbGQ6IHRydWUgfSxcbiAgICB7IGFsbG93VW5rbm93bjogdHJ1ZSwgYWJvcnRFYXJseTogZmFsc2UsIGVycm9yczogeyB3cmFwOiB7IGxhYmVsOiAnJyB9IH0gfSxcbiAgKSxcbiAgYXV0aENvbnRyb2xsZXIucmVnaXN0ZXIsXG4pO1xuXG4vKiogIExvZ2luIGEgdXNlclxuICogQHJvdXRlIFBPU1QgL2FwaS9hdXRoL2xvZ2luXG4gKiBAQm9keSBlbWFpbCwgcGFzc3dvcmRcbiAqIEBkZXNjIExvZ2luIGEgdXNlclxuICogQGFjY2VzcyBQdWJsaWNcbiAqXG4gKiAqL1xucm91dGVyLnBvc3QoXG4gICcvbG9naW4nLFxuICB2YWxpZGF0ZShhdXRoVmFsaWRhdG9yLmxvZ2luU2NoZW1hKSxcbiAgYXV0aENvbnRyb2xsZXIubG9naW4sXG4pO1xuXG4vKiogIExvZ291dCBhIHVzZXJcbiAqIEByb3V0ZSBQT1NUIC9hcGkvYXV0aC9sb2dvdXRcbiAqIEBkZXNjIExvZ291dCBhIHVzZXJcbiAqIEBhY2Nlc3MgUHJpdmF0ZVxuICpcbiAqICovXG5yb3V0ZXIucG9zdCgnL2xvZ291dCcsIGF1dGhDb250cm9sbGVyLmxvZ291dCk7XG5cbi8qKiAgR2V0IGN1cnJlbnQgdXNlclxuICogQHJvdXRlIEdFVCAvYXBpL2F1dGgvY3VycmVudFxuICogQGRlc2MgR2V0IGN1cnJlbnQgdXNlclxuICogQGFjY2VzcyBQcml2YXRlXG4gKiAqL1xucm91dGVyLmdldChcbiAgJy9jdXJyZW50JyxcbiAgcmVxdWlyZUF1dGgsXG4gIGF1dGhDb250cm9sbGVyLmdldEN1cnJlbnRVc2VyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFxRDtBQUFBO0FBRXJELE1BQU1BLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUYsTUFBTSxDQUFDRyxJQUFJLENBQ1QsV0FBVyxFQUNYLElBQUFDLDJCQUFRLEVBQ05DLGFBQWEsQ0FBQ0MsY0FBYyxFQUM1QjtFQUFFQyxVQUFVLEVBQUU7QUFBSyxDQUFDLEVBQ3BCO0VBQUVDLFlBQVksRUFBRSxJQUFJO0VBQUVDLFVBQVUsRUFBRSxLQUFLO0VBQUVDLE1BQU0sRUFBRTtJQUFFQyxJQUFJLEVBQUU7TUFBRUMsS0FBSyxFQUFFO0lBQUc7RUFBRTtBQUFFLENBQUMsQ0FDM0UsRUFDREMsY0FBYyxDQUFDQyxRQUFRLENBQ3hCOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FkLE1BQU0sQ0FBQ0csSUFBSSxDQUNULFFBQVEsRUFDUixJQUFBQywyQkFBUSxFQUFDQyxhQUFhLENBQUNVLFdBQVcsQ0FBQyxFQUNuQ0YsY0FBYyxDQUFDRyxLQUFLLENBQ3JCOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBaEIsTUFBTSxDQUFDRyxJQUFJLENBQUMsU0FBUyxFQUFFVSxjQUFjLENBQUNJLE1BQU0sQ0FBQzs7QUFFN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBakIsTUFBTSxDQUFDa0IsR0FBRyxDQUNSLFVBQVUsRUFDVkMsb0JBQVcsRUFDWE4sY0FBYyxDQUFDTyxjQUFjLENBQzlCO0FBQUMsZUFFYXBCLE1BQU07QUFBQSJ9","map":{"version":3,"names":["router","express","Router","post","validate","authValidator","registerSchema","keyByField","allowUnknown","abortEarly","errors","wrap","label","authController","register","loginSchema","login","logout","get","requireAuth","getCurrentUser"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/routes/","sources":["auth.routes.js"],"sourcesContent":["import express from 'express';\nimport { validate } from 'express-validation';\nimport * as authValidator from '../controllers/auth/auth.validator';\nimport * as authController from '../controllers/auth/auth.controller';\nimport requireAuth from '../middlewares/requireAuth';\n\nconst router = express.Router();\n\n/**  Register a new user\n* @route POST /api/auth/register\n* @Body email, password, confirmPassword\n* @desc Register a new user\n* @access Public\n*/\nrouter.post(\n  '/register',\n  validate(\n    authValidator.registerSchema,\n    { keyByField: true },\n    { allowUnknown: true, abortEarly: false, errors: { wrap: { label: '' } } },\n  ),\n  authController.register,\n);\n\n/**  Login a user\n * @route POST /api/auth/login\n * @Body email, password\n * @desc Login a user\n * @access Public\n *\n * */\nrouter.post(\n  '/login',\n  validate(authValidator.loginSchema),\n  authController.login,\n);\n\n/**  Logout a user\n * @route POST /api/auth/logout\n * @desc Logout a user\n * @access Private\n *\n * */\nrouter.post('/logout', authController.logout);\n\n/**  Get current user\n * @route GET /api/auth/current\n * @desc Get current user\n * @access Private\n * */\nrouter.get(\n  '/current',\n  requireAuth,\n  authController.getCurrentUser,\n);\n\nexport default router;\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAqD;AAAA;AAErD,MAAMA,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACAF,MAAM,CAACG,IAAI,CACT,WAAW,EACX,IAAAC,2BAAQ,EACNC,aAAa,CAACC,cAAc,EAC5B;EAAEC,UAAU,EAAE;AAAK,CAAC,EACpB;EAAEC,YAAY,EAAE,IAAI;EAAEC,UAAU,EAAE,KAAK;EAAEC,MAAM,EAAE;IAAEC,IAAI,EAAE;MAAEC,KAAK,EAAE;IAAG;EAAE;AAAE,CAAC,CAC3E,EACDC,cAAc,CAACC,QAAQ,CACxB;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACAd,MAAM,CAACG,IAAI,CACT,QAAQ,EACR,IAAAC,2BAAQ,EAACC,aAAa,CAACU,WAAW,CAAC,EACnCF,cAAc,CAACG,KAAK,CACrB;;AAED;AACA;AACA;AACA;AACA;AACA;AACAhB,MAAM,CAACG,IAAI,CAAC,SAAS,EAAEU,cAAc,CAACI,MAAM,CAAC;;AAE7C;AACA;AACA;AACA;AACA;AACAjB,MAAM,CAACkB,GAAG,CACR,UAAU,EACVC,oBAAW,EACXN,cAAc,CAACO,cAAc,CAC9B;AAAC,eAEapB,MAAM;AAAA"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/auth.validator.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerSchema = exports.loginSchema = void 0;\nvar _expressValidation = require(\"express-validation\");\nvar _logger = _interopRequireDefault(require(\"../../utils/logger\"));\n_logger.default.info('Started \\'authValidator\\' controller');\nconst registerSchema = {\n  body: _expressValidation.Joi.object({\n    email: _expressValidation.Joi.string().email().trim().required(),\n    password: _expressValidation.Joi.string().required(),\n    confirmPassword: _expressValidation.Joi.string().required()\n  })\n};\nexports.registerSchema = registerSchema;\nconst loginSchema = {\n  body: _expressValidation.Joi.object({\n    email: _expressValidation.Joi.string().email().trim().required(),\n    password: _expressValidation.Joi.string().required()\n  })\n};\nexports.loginSchema = loginSchema;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dnZXIiLCJpbmZvIiwicmVnaXN0ZXJTY2hlbWEiLCJib2R5IiwiSm9pIiwib2JqZWN0IiwiZW1haWwiLCJzdHJpbmciLCJ0cmltIiwicmVxdWlyZWQiLCJwYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsImxvZ2luU2NoZW1hIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9zdHVubmEvRG9jdW1lbnRzL2Rldi93YXRlci1sZXZlbC1hbmQtcXVhbGl0eS1zZW5zb3Ivd2F0ZXJfc2VydmVyL3NyYy9jb250cm9sbGVycy9hdXRoLyIsInNvdXJjZXMiOlsiYXV0aC52YWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSm9pIH0gZnJvbSAnZXhwcmVzcy12YWxpZGF0aW9uJztcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vLi4vdXRpbHMvbG9nZ2VyJztcblxubG9nZ2VyLmluZm8oJ1N0YXJ0ZWQgXFwnYXV0aFZhbGlkYXRvclxcJyBjb250cm9sbGVyJyk7XG5leHBvcnQgY29uc3QgcmVnaXN0ZXJTY2hlbWEgPSB7XG4gIGJvZHk6IEpvaS5vYmplY3Qoe1xuICAgIGVtYWlsOiBKb2kuc3RyaW5nKCkuZW1haWwoKS50cmltKCkucmVxdWlyZWQoKSxcbiAgICBwYXNzd29yZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgY29uZmlybVBhc3N3b3JkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgfSksXG59O1xuXG5leHBvcnQgY29uc3QgbG9naW5TY2hlbWEgPSB7XG4gIGJvZHk6IEpvaS5vYmplY3Qoe1xuICAgIGVtYWlsOiBKb2kuc3RyaW5nKCkuZW1haWwoKS50cmltKCkucmVxdWlyZWQoKSxcbiAgICBwYXNzd29yZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIH0pLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFFQUEsZUFBTSxDQUFDQyxJQUFJLENBQUMsc0NBQXNDLENBQUM7QUFDNUMsTUFBTUMsY0FBYyxHQUFHO0VBQzVCQyxJQUFJLEVBQUVDLHNCQUFHLENBQUNDLE1BQU0sQ0FBQztJQUNmQyxLQUFLLEVBQUVGLHNCQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDRCxLQUFLLEVBQUUsQ0FBQ0UsSUFBSSxFQUFFLENBQUNDLFFBQVEsRUFBRTtJQUM3Q0MsUUFBUSxFQUFFTixzQkFBRyxDQUFDRyxNQUFNLEVBQUUsQ0FBQ0UsUUFBUSxFQUFFO0lBQ2pDRSxlQUFlLEVBQUVQLHNCQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDRSxRQUFRO0VBQ3hDLENBQUM7QUFDSCxDQUFDO0FBQUM7QUFFSyxNQUFNRyxXQUFXLEdBQUc7RUFDekJULElBQUksRUFBRUMsc0JBQUcsQ0FBQ0MsTUFBTSxDQUFDO0lBQ2ZDLEtBQUssRUFBRUYsc0JBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNELEtBQUssRUFBRSxDQUFDRSxJQUFJLEVBQUUsQ0FBQ0MsUUFBUSxFQUFFO0lBQzdDQyxRQUFRLEVBQUVOLHNCQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDRSxRQUFRO0VBQ2pDLENBQUM7QUFDSCxDQUFDO0FBQUMifQ==","map":{"version":3,"names":["logger","info","registerSchema","body","Joi","object","email","string","trim","required","password","confirmPassword","loginSchema"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/","sources":["auth.validator.js"],"sourcesContent":["import { Joi } from 'express-validation';\nimport logger from '../../utils/logger';\n\nlogger.info('Started \\'authValidator\\' controller');\nexport const registerSchema = {\n  body: Joi.object({\n    email: Joi.string().email().trim().required(),\n    password: Joi.string().required(),\n    confirmPassword: Joi.string().required(),\n  }),\n};\n\nexport const loginSchema = {\n  body: Joi.object({\n    email: Joi.string().email().trim().required(),\n    password: Joi.string().required(),\n  }),\n};\n"],"mappings":";;;;;;;AAAA;AACA;AAEAA,eAAM,CAACC,IAAI,CAAC,sCAAsC,CAAC;AAC5C,MAAMC,cAAc,GAAG;EAC5BC,IAAI,EAAEC,sBAAG,CAACC,MAAM,CAAC;IACfC,KAAK,EAAEF,sBAAG,CAACG,MAAM,EAAE,CAACD,KAAK,EAAE,CAACE,IAAI,EAAE,CAACC,QAAQ,EAAE;IAC7CC,QAAQ,EAAEN,sBAAG,CAACG,MAAM,EAAE,CAACE,QAAQ,EAAE;IACjCE,eAAe,EAAEP,sBAAG,CAACG,MAAM,EAAE,CAACE,QAAQ;EACxC,CAAC;AACH,CAAC;AAAC;AAEK,MAAMG,WAAW,GAAG;EACzBT,IAAI,EAAEC,sBAAG,CAACC,MAAM,CAAC;IACfC,KAAK,EAAEF,sBAAG,CAACG,MAAM,EAAE,CAACD,KAAK,EAAE,CAACE,IAAI,EAAE,CAACC,QAAQ,EAAE;IAC7CC,QAAQ,EAAEN,sBAAG,CAACG,MAAM,EAAE,CAACE,QAAQ;EACjC,CAAC;AACH,CAAC;AAAC"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/utils/logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _clsRtracer = _interopRequireDefault(require(\"cls-rtracer\"));\nvar _winston = require(\"winston\");\nconst {\n  combine,\n  timestamp,\n  label,\n  printf\n} = _winston.format;\nconst myFormat = printf(info => {\n  const rid = _clsRtracer.default.id();\n  return rid ? `${info.timestamp} [request-id:${rid}]: ${info.message}` : `${info.timestamp}: ${info.message}`;\n});\nconst logger = (0, _winston.createLogger)({\n  format: combine(label({\n    label: 'my-app'\n  }), timestamp(), myFormat),\n  transports: [new _winston.transports.Console(), new _winston.transports.File({\n    filename: 'error.log',\n    level: 'error'\n  }), new _winston.transports.File({\n    filename: 'combined.log'\n  })]\n});\nvar _default = logger;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb21iaW5lIiwidGltZXN0YW1wIiwibGFiZWwiLCJwcmludGYiLCJmb3JtYXQiLCJteUZvcm1hdCIsImluZm8iLCJyaWQiLCJyVHJhY2VyIiwiaWQiLCJtZXNzYWdlIiwibG9nZ2VyIiwiY3JlYXRlTG9nZ2VyIiwidHJhbnNwb3J0cyIsIkNvbnNvbGUiLCJGaWxlIiwiZmlsZW5hbWUiLCJsZXZlbCJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJsb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJUcmFjZXIgZnJvbSAnY2xzLXJ0cmFjZXInO1xuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyLCBmb3JtYXQsIHRyYW5zcG9ydHMgfSBmcm9tICd3aW5zdG9uJztcblxuY29uc3Qge1xuICBjb21iaW5lLCB0aW1lc3RhbXAsIGxhYmVsLCBwcmludGYsXG59ID0gZm9ybWF0O1xuXG5jb25zdCBteUZvcm1hdCA9IHByaW50ZigoaW5mbykgPT4ge1xuICBjb25zdCByaWQgPSByVHJhY2VyLmlkKCk7XG4gIHJldHVybiByaWRcbiAgICA/IGAke2luZm8udGltZXN0YW1wfSBbcmVxdWVzdC1pZDoke3JpZH1dOiAke2luZm8ubWVzc2FnZX1gXG4gICAgOiBgJHtpbmZvLnRpbWVzdGFtcH06ICR7aW5mby5tZXNzYWdlfWA7XG59KTtcblxuY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKHtcbiAgZm9ybWF0OiBjb21iaW5lKFxuICAgIGxhYmVsKHsgbGFiZWw6ICdteS1hcHAnIH0pLFxuICAgIHRpbWVzdGFtcCgpLFxuICAgIG15Rm9ybWF0LFxuICApLFxuICB0cmFuc3BvcnRzOiBbXG4gICAgbmV3IHRyYW5zcG9ydHMuQ29uc29sZSgpLFxuICAgIG5ldyB0cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2Vycm9yLmxvZycsIGxldmVsOiAnZXJyb3InIH0pLFxuICAgIG5ldyB0cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2NvbWJpbmVkLmxvZycgfSksXG4gIF0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUVBLE1BQU07RUFDSkEsT0FBTztFQUFFQyxTQUFTO0VBQUVDLEtBQUs7RUFBRUM7QUFDN0IsQ0FBQyxHQUFHQyxlQUFNO0FBRVYsTUFBTUMsUUFBUSxHQUFHRixNQUFNLENBQUVHLElBQUksSUFBSztFQUNoQyxNQUFNQyxHQUFHLEdBQUdDLG1CQUFPLENBQUNDLEVBQUUsRUFBRTtFQUN4QixPQUFPRixHQUFHLEdBQ0wsR0FBRUQsSUFBSSxDQUFDTCxTQUFVLGdCQUFlTSxHQUFJLE1BQUtELElBQUksQ0FBQ0ksT0FBUSxFQUFDLEdBQ3ZELEdBQUVKLElBQUksQ0FBQ0wsU0FBVSxLQUFJSyxJQUFJLENBQUNJLE9BQVEsRUFBQztBQUMxQyxDQUFDLENBQUM7QUFFRixNQUFNQyxNQUFNLEdBQUcsSUFBQUMscUJBQVksRUFBQztFQUMxQlIsTUFBTSxFQUFFSixPQUFPLENBQ2JFLEtBQUssQ0FBQztJQUFFQSxLQUFLLEVBQUU7RUFBUyxDQUFDLENBQUMsRUFDMUJELFNBQVMsRUFBRSxFQUNYSSxRQUFRLENBQ1Q7RUFDRFEsVUFBVSxFQUFFLENBQ1YsSUFBSUEsbUJBQVUsQ0FBQ0MsT0FBTyxFQUFFLEVBQ3hCLElBQUlELG1CQUFVLENBQUNFLElBQUksQ0FBQztJQUFFQyxRQUFRLEVBQUUsV0FBVztJQUFFQyxLQUFLLEVBQUU7RUFBUSxDQUFDLENBQUMsRUFDOUQsSUFBSUosbUJBQVUsQ0FBQ0UsSUFBSSxDQUFDO0lBQUVDLFFBQVEsRUFBRTtFQUFlLENBQUMsQ0FBQztBQUVyRCxDQUFDLENBQUM7QUFBQyxlQUVZTCxNQUFNO0FBQUEifQ==","map":{"version":3,"names":["combine","timestamp","label","printf","format","myFormat","info","rid","rTracer","id","message","logger","createLogger","transports","Console","File","filename","level"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/utils/","sources":["logger.js"],"sourcesContent":["import rTracer from 'cls-rtracer';\nimport { createLogger, format, transports } from 'winston';\n\nconst {\n  combine, timestamp, label, printf,\n} = format;\n\nconst myFormat = printf((info) => {\n  const rid = rTracer.id();\n  return rid\n    ? `${info.timestamp} [request-id:${rid}]: ${info.message}`\n    : `${info.timestamp}: ${info.message}`;\n});\n\nconst logger = createLogger({\n  format: combine(\n    label({ label: 'my-app' }),\n    timestamp(),\n    myFormat,\n  ),\n  transports: [\n    new transports.Console(),\n    new transports.File({ filename: 'error.log', level: 'error' }),\n    new transports.File({ filename: 'combined.log' }),\n  ],\n});\n\nexport default logger;\n"],"mappings":";;;;;;;AAAA;AACA;AAEA,MAAM;EACJA,OAAO;EAAEC,SAAS;EAAEC,KAAK;EAAEC;AAC7B,CAAC,GAAGC,eAAM;AAEV,MAAMC,QAAQ,GAAGF,MAAM,CAAEG,IAAI,IAAK;EAChC,MAAMC,GAAG,GAAGC,mBAAO,CAACC,EAAE,EAAE;EACxB,OAAOF,GAAG,GACL,GAAED,IAAI,CAACL,SAAU,gBAAeM,GAAI,MAAKD,IAAI,CAACI,OAAQ,EAAC,GACvD,GAAEJ,IAAI,CAACL,SAAU,KAAIK,IAAI,CAACI,OAAQ,EAAC;AAC1C,CAAC,CAAC;AAEF,MAAMC,MAAM,GAAG,IAAAC,qBAAY,EAAC;EAC1BR,MAAM,EAAEJ,OAAO,CACbE,KAAK,CAAC;IAAEA,KAAK,EAAE;EAAS,CAAC,CAAC,EAC1BD,SAAS,EAAE,EACXI,QAAQ,CACT;EACDQ,UAAU,EAAE,CACV,IAAIA,mBAAU,CAACC,OAAO,EAAE,EACxB,IAAID,mBAAU,CAACE,IAAI,CAAC;IAAEC,QAAQ,EAAE,WAAW;IAAEC,KAAK,EAAE;EAAQ,CAAC,CAAC,EAC9D,IAAIJ,mBAAU,CAACE,IAAI,CAAC;IAAEC,QAAQ,EAAE;EAAe,CAAC,CAAC;AAErD,CAAC,CAAC;AAAC,eAEYL,MAAM;AAAA"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/config/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar dotenv = _interopRequireWildcard(require(\"dotenv\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\ndotenv.config();\nconst config = {\n  development: {\n    username: process.env.DB_USER,\n    password: process.env.DB_PASS,\n    database: process.env.DB_NAME,\n    host: process.env.DB_HOST,\n    dialect: 'postgres',\n    port: parseInt(process.env.DB_PORT, 10)\n  }\n};\nmodule.exports = config;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJkZXZlbG9wbWVudCIsInVzZXJuYW1lIiwicHJvY2VzcyIsImVudiIsIkRCX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1MiLCJkYXRhYmFzZSIsIkRCX05BTUUiLCJob3N0IiwiREJfSE9TVCIsImRpYWxlY3QiLCJwb3J0IiwicGFyc2VJbnQiLCJEQl9QT1JUIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvc3R1bm5hL0RvY3VtZW50cy9kZXYvd2F0ZXItbGV2ZWwtYW5kLXF1YWxpdHktc2Vuc29yL3dhdGVyX3NlcnZlci9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRvdGVudiBmcm9tICdkb3RlbnYnO1xuXG5kb3RlbnYuY29uZmlnKCk7XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgZGV2ZWxvcG1lbnQ6IHtcbiAgICB1c2VybmFtZTogcHJvY2Vzcy5lbnYuREJfVVNFUixcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTUyxcbiAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSxcbiAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULFxuICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCwgMTApLFxuICB9LFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb25maWc7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFBaUM7QUFBQTtBQUVqQ0EsTUFBTSxDQUFDQyxNQUFNLEVBQUU7QUFFZixNQUFNQSxNQUFNLEdBQUc7RUFDYkMsV0FBVyxFQUFFO0lBQ1hDLFFBQVEsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87SUFDN0JDLFFBQVEsRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87SUFDN0JDLFFBQVEsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLE9BQU87SUFDN0JDLElBQUksRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLE9BQU87SUFDekJDLE9BQU8sRUFBRSxVQUFVO0lBQ25CQyxJQUFJLEVBQUVDLFFBQVEsQ0FBQ1gsT0FBTyxDQUFDQyxHQUFHLENBQUNXLE9BQU8sRUFBRSxFQUFFO0VBQ3hDO0FBQ0YsQ0FBQztBQUVEQyxNQUFNLENBQUNDLE9BQU8sR0FBR2pCLE1BQU0ifQ==","map":{"version":3,"names":["dotenv","config","development","username","process","env","DB_USER","password","DB_PASS","database","DB_NAME","host","DB_HOST","dialect","port","parseInt","DB_PORT","module","exports"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/config/","sources":["config.js"],"sourcesContent":["import * as dotenv from 'dotenv';\n\ndotenv.config();\n\nconst config = {\n  development: {\n    username: process.env.DB_USER,\n    password: process.env.DB_PASS,\n    database: process.env.DB_NAME,\n    host: process.env.DB_HOST,\n    dialect: 'postgres',\n    port: parseInt(process.env.DB_PORT, 10),\n  },\n};\n\nmodule.exports = config;\n"],"mappings":";;AAAA;AAAiC;AAAA;AAEjCA,MAAM,CAACC,MAAM,EAAE;AAEf,MAAMA,MAAM,GAAG;EACbC,WAAW,EAAE;IACXC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;IAC7BC,QAAQ,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;IAC7BC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,OAAO;IAC7BC,IAAI,EAAEP,OAAO,CAACC,GAAG,CAACO,OAAO;IACzBC,OAAO,EAAE,UAAU;IACnBC,IAAI,EAAEC,QAAQ,CAACX,OAAO,CAACC,GAAG,CAACW,OAAO,EAAE,EAAE;EACxC;AACF,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGjB,MAAM"}},"mtime":1678304595835},"{\"assumptions\":{},\"sourceRoot\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"filename\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/auth.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.register = exports.logout = exports.login = exports.getCurrentUser = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _logger = _interopRequireDefault(require(\"../../utils/logger\"));\nvar _models = _interopRequireDefault(require(\"../../db/models\"));\nvar _password = _interopRequireDefault(require(\"../../services/password\"));\nvar _utils = require(\"../../utils\");\nconst register = async (req, res) => {\n  _logger.default.info('Registering user');\n  try {\n    const {\n      email,\n      password,\n      confirmPassword\n    } = req.body;\n\n    // Check if passwords match\n    if (password !== confirmPassword) {\n      throw new Error('Passwords do not match');\n    }\n\n    // Check if user already exists\n    const user = await _models.default.findOne({\n      where: {\n        email\n      }\n    });\n    if (user) {\n      throw new Error('User already exists');\n    }\n\n    // Hash password\n    const hashedPassword = await _password.default.toHash(password);\n\n    // Create user\n    try {\n      await _models.default.create({\n        email,\n        password: hashedPassword\n      });\n    } catch (error) {\n      _logger.default.error(error);\n      throw new Error('Error creating user');\n    }\n    return (0, _utils.successResponse)(req, res, 'User created successfully', 201);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 'Failed', 500);\n  }\n};\nexports.register = register;\nconst login = async (req, res) => {\n  _logger.default.info('Logging in user');\n  try {\n    const {\n      email,\n      password\n    } = req.body;\n\n    // Check if user exists\n    const user = await _models.default.findOne({\n      where: {\n        email\n      }\n    });\n    if (!user) {\n      throw new Error('User does not exist');\n    }\n\n    // Check if password is correct\n    const isPasswordCorrect = await _password.default.compare(user.password, password);\n    if (!isPasswordCorrect) {\n      throw new Error('Incorrect password');\n    }\n\n    // Generate token\n    const token = _jsonwebtoken.default.sign({\n      id: user.id,\n      email: user.email,\n      createdAt: new Date()\n    }, process.env.JWT_SECRET, {\n      expiresIn: '30d'\n    });\n    const data = {\n      token,\n      user: {\n        id: user.id,\n        email: user.email\n      }\n    };\n    return (0, _utils.successResponse)(req, res, data, 200);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 400);\n  }\n};\nexports.login = login;\nconst logout = async (req, res) => {\n  _logger.default.info('Logging out user');\n  try {\n    req.headers['x-token'] = null;\n    req.headers = {};\n    return (0, _utils.successResponse)(req, res, 'User logged out successfully', null);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 400);\n  }\n};\nexports.logout = logout;\nconst getCurrentUser = async (req, res) => {\n  _logger.default.info('Getting current user');\n  try {\n    const user = await _models.default.findOne({\n      where: {\n        id: req.user.id\n      }\n    });\n    return (0, _utils.successResponse)(req, res, user, 200);\n  } catch (error) {\n    _logger.default.error(error);\n    return (0, _utils.errorResponse)(req, res, error.message, 400);\n  }\n};\nexports.getCurrentUser = getCurrentUser;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3RlciIsInJlcSIsInJlcyIsImxvZ2dlciIsImluZm8iLCJlbWFpbCIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiYm9keSIsIkVycm9yIiwidXNlciIsIlVzZXIiLCJmaW5kT25lIiwid2hlcmUiLCJoYXNoZWRQYXNzd29yZCIsIlBhc3N3b3JkIiwidG9IYXNoIiwiY3JlYXRlIiwiZXJyb3IiLCJzdWNjZXNzUmVzcG9uc2UiLCJlcnJvclJlc3BvbnNlIiwibWVzc2FnZSIsImxvZ2luIiwiaXNQYXNzd29yZENvcnJlY3QiLCJjb21wYXJlIiwidG9rZW4iLCJqd3QiLCJzaWduIiwiaWQiLCJjcmVhdGVkQXQiLCJEYXRlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJkYXRhIiwibG9nb3V0IiwiaGVhZGVycyIsImdldEN1cnJlbnRVc2VyIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9zdHVubmEvRG9jdW1lbnRzL2Rldi93YXRlci1sZXZlbC1hbmQtcXVhbGl0eS1zZW5zb3Ivd2F0ZXJfc2VydmVyL3NyYy9jb250cm9sbGVycy9hdXRoLyIsInNvdXJjZXMiOlsiYXV0aC5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vLi4vdXRpbHMvbG9nZ2VyJztcbmltcG9ydCBVc2VyIGZyb20gJy4uLy4uL2RiL21vZGVscyc7XG5pbXBvcnQgUGFzc3dvcmQgZnJvbSAnLi4vLi4vc2VydmljZXMvcGFzc3dvcmQnO1xuaW1wb3J0IHsgZXJyb3JSZXNwb25zZSwgc3VjY2Vzc1Jlc3BvbnNlIH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ1JlZ2lzdGVyaW5nIHVzZXInKTtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIC8vIENoZWNrIGlmIHBhc3N3b3JkcyBtYXRjaFxuICAgIGlmIChwYXNzd29yZCAhPT0gY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bhc3N3b3JkcyBkbyBub3QgbWF0Y2gnKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XG5cbiAgICBpZiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgfVxuXG4gICAgLy8gSGFzaCBwYXNzd29yZFxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgUGFzc3dvcmQudG9IYXNoKHBhc3N3b3JkKTtcblxuICAgIC8vIENyZWF0ZSB1c2VyXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IFVzZXIuY3JlYXRlKHsgZW1haWwsIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcicpO1xuICAgIH1cblxuICAgIHJldHVybiBzdWNjZXNzUmVzcG9uc2UocmVxLCByZXMsICdVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgMjAxKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiBlcnJvclJlc3BvbnNlKHJlcSwgcmVzLCBlcnJvci5tZXNzYWdlLCAnRmFpbGVkJywgNTAwKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGxvZ2luID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGxvZ2dlci5pbmZvKCdMb2dnaW5nIGluIHVzZXInKTtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0c1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgZG9lcyBub3QgZXhpc3QnKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBwYXNzd29yZCBpcyBjb3JyZWN0XG4gICAgY29uc3QgaXNQYXNzd29yZENvcnJlY3QgPSBhd2FpdCBQYXNzd29yZC5jb21wYXJlKHVzZXIucGFzc3dvcmQsIHBhc3N3b3JkKTtcblxuICAgIGlmICghaXNQYXNzd29yZENvcnJlY3QpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW5jb3JyZWN0IHBhc3N3b3JkJyk7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgdG9rZW5cbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgaWQ6IHVzZXIuaWQsIGVtYWlsOiB1c2VyLmVtYWlsLCBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICczMGQnIH0pO1xuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHRva2VuLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICByZXR1cm4gc3VjY2Vzc1Jlc3BvbnNlKHJlcSwgcmVzLCBkYXRhLCAyMDApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgcmV0dXJuIGVycm9yUmVzcG9uc2UocmVxLCByZXMsIGVycm9yLm1lc3NhZ2UsIDQwMCk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBsb2dvdXQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ0xvZ2dpbmcgb3V0IHVzZXInKTtcbiAgdHJ5IHtcbiAgICByZXEuaGVhZGVyc1sneC10b2tlbiddID0gbnVsbDtcbiAgICByZXEuaGVhZGVycyA9IHt9O1xuICAgIHJldHVybiBzdWNjZXNzUmVzcG9uc2UocmVxLCByZXMsICdVc2VyIGxvZ2dlZCBvdXQgc3VjY2Vzc2Z1bGx5JywgbnVsbCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICByZXR1cm4gZXJyb3JSZXNwb25zZShyZXEsIHJlcywgZXJyb3IubWVzc2FnZSwgNDAwKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRVc2VyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGxvZ2dlci5pbmZvKCdHZXR0aW5nIGN1cnJlbnQgdXNlcicpO1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogcmVxLnVzZXIuaWQgfSB9KTtcbiAgICByZXR1cm4gc3VjY2Vzc1Jlc3BvbnNlKHJlcSwgcmVzLCB1c2VyLCAyMDApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgcmV0dXJuIGVycm9yUmVzcG9uc2UocmVxLCByZXMsIGVycm9yLm1lc3NhZ2UsIDQwMCk7XG4gIH1cbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRU8sTUFBTUEsUUFBUSxHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzFDQyxlQUFNLENBQUNDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztFQUMvQixJQUFJO0lBQ0YsTUFBTTtNQUFFQyxLQUFLO01BQUVDLFFBQVE7TUFBRUM7SUFBZ0IsQ0FBQyxHQUFHTixHQUFHLENBQUNPLElBQUk7O0lBRXJEO0lBQ0EsSUFBSUYsUUFB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","map":{"version":3,"names":["register","req","res","logger","info","email","password","confirmPassword","body","Error","user","User","findOne","where","hashedPassword","Password","toHash","create","error","successResponse","errorResponse","message","login","isPasswordCorrect","compare","token","jwt","sign","id","createdAt","Date","process","env","JWT_SECRET","expiresIn","data","logout","headers","getCurrentUser"],"sourceRoot":"/home/stunna/Documents/dev/water-level-and-quality-sensor/water_server/src/controllers/auth/","sources":["auth.controller.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\nimport logger from '../../utils/logger';\nimport User from '../../db/models';\nimport Password from '../../services/password';\nimport { errorResponse, successResponse } from '../../utils';\n\nexport const register = async (req, res) => {\n  logger.info('Registering user');\n  try {\n    const { email, password, confirmPassword } = req.body;\n\n    // Check if passwords match\n    if (password !== confirmPassword) {\n      throw new Error('Passwords do not match');\n    }\n\n    // Check if user already exists\n    const user = await User.findOne({ where: { email } });\n\n    if (user) {\n      throw new Error('User already exists');\n    }\n\n    // Hash password\n    const hashedPassword = await Password.toHash(password);\n\n    // Create user\n    try {\n      await User.create({ email, password: hashedPassword });\n    } catch (error) {\n      logger.error(error);\n      throw new Error('Error creating user');\n    }\n\n    return successResponse(req, res, 'User created successfully', 201);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 'Failed', 500);\n  }\n};\n\nexport const login = async (req, res) => {\n  logger.info('Logging in user');\n  try {\n    const { email, password } = req.body;\n\n    // Check if user exists\n    const user = await User.findOne({ where: { email } });\n\n    if (!user) {\n      throw new Error('User does not exist');\n    }\n\n    // Check if password is correct\n    const isPasswordCorrect = await Password.compare(user.password, password);\n\n    if (!isPasswordCorrect) {\n      throw new Error('Incorrect password');\n    }\n\n    // Generate token\n    const token = jwt.sign({ id: user.id, email: user.email, createdAt: new Date() }, process.env.JWT_SECRET, { expiresIn: '30d' });\n\n    const data = {\n      token,\n      user: {\n        id: user.id,\n        email: user.email,\n      },\n    };\n\n    return successResponse(req, res, data, 200);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 400);\n  }\n};\n\nexport const logout = async (req, res) => {\n  logger.info('Logging out user');\n  try {\n    req.headers['x-token'] = null;\n    req.headers = {};\n    return successResponse(req, res, 'User logged out successfully', null);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 400);\n  }\n};\n\nexport const getCurrentUser = async (req, res) => {\n  logger.info('Getting current user');\n  try {\n    const user = await User.findOne({ where: { id: req.user.id } });\n    return successResponse(req, res, user, 200);\n  } catch (error) {\n    logger.error(error);\n    return errorResponse(req, res, error.message, 400);\n  }\n};\n"],"mappings":"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"}},"mtime":1678304595835}}